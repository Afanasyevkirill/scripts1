"use strict";(self.webpackChunkof_vue=self.webpackChunkof_vue||[]).push([[26455],{138030:function(e,t,s){var a=s(827753),i=s(110908),o=s(734287),r=s(810714);t.A={data(){return{size:738}},computed:{...(0,i.npG)(["authUser"]),...(0,i.why)(["QRCode","QRCodeSize"]),isQRExists(){return this.QRCode.length},width(){return this.size},height(){return this.size*this.QRCodeSize.height/this.QRCodeSize.width}},methods:{download(){if(this.QRCode){let e=new Image;e.onload=()=>{let t=document.createElement("canvas"),s=t.getContext("2d"),i=document.createElement("a");t.setAttribute("width",this.width),t.setAttribute("height",this.height),s.drawImage(e,0,0,this.width,this.height),i.href=t.toDataURL(),i.download=`${this.authUser.username}.png`,(0,a.MD)({message:"download",logger:"QRCode",logData:{userId:this.authUser.id,config:{avatar:o.w.local.get(r.W.QR_CODE_AVATAR),URL:o.w.local.get(r.W.QR_CODE_URL)}}}).catch((()=>{})),i.click(),this.$nextTick((()=>{i=null,e=null,t=null,s=null}))},e.src=this.QRCode}}}}},246877:function(e,t){t.A={computed:{isOptional(){return!(this.required||this.readonly||this.either)}}}},649550:function(e,t,s){s.d(t,{A:function(){return Q}});var a=function e(){var t=this,s=t._self._c;return t.authUser.username?s("settings-wrapper",[t.count?s("p",{staticClass:"text-center"},[t._v(" "+t._s(t.$t("message.qrcode_scans"))+": "+t._s(t.count)+" ")]):t._e(),s("div",{staticClass:"b-qrcode"},[t.isQRExists?s("img",{attrs:{src:t.QRCode,alt:t.authUser.username}}):s("spinner-loader")],1),s("div",{class:{"g-negative-sides-gaps":t.isModal}},[s("checkbox-o-f",{staticClass:"b-menu-list__el",attrs:{type:"toggle",name:"add-url",disabled:t.disabledSettings,label:t.$t("message.add_url_to_qrcode")},model:{value:t.isShowURL,callback:function(e){t.isShowURL=e},expression:"isShowURL"}}),s("checkbox-o-f",{staticClass:"b-menu-list__el",attrs:{type:"toggle",name:"add-avatar",disabled:t.disabledSettings||!t.authUser.avatar||t.avatarError,label:t.$t("message.add_avatar_to_qrcode")},model:{value:t.isShowAvatar,callback:function(e){t.isShowAvatar=e},expression:"isShowAvatar"}})],1)]):t._e()},i=[],o=s(962953),r=s(964979),n=s(803296),l=s(527208),h=s(548408),d=s(814603),c=s(147566),u=s(198721),g=s(490997),f=s(758684),m=s.n(f),w=s(202600),v=s(684912),p=s(110908),b=s(949868),R=s(730394),C=s(695231),S=s(734287),_=s(810714),z,A={name:"SettingsQRCode",components:{CheckboxOF:b.A,SpinnerLoader:R.default,SettingsWrapper:C.A},props:{isModal:{type:Boolean,default:!1}},data(){return{options:{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},observer:!0,observeParents:!0},size:246,dotSize:6,code:"",isShowURL:S.w.local.get(_.W.QR_CODE_URL),isShowAvatar:S.w.local.get(_.W.QR_CODE_AVATAR),disabledSettings:!1,avatarError:!1,count:null,host:"onlyfans.com",hostFull:"https://onlyfans.com"}},computed:{...(0,p.npG)(["authUser"]),...(0,p.why)(["QRCode"]),isQRExists(){return this.QRCode.length}},watch:{isShowURL(e){S.w.local.set(_.W.QR_CODE_URL,e),this.createCode()},isShowAvatar(e){S.w.local.set(_.W.QR_CODE_AVATAR,e),this.createCode()}},async mounted(){this.isQRExists||this.createCode();try{const{count:e}=await(0,w.Ps)();this.count=e}catch(e){}},methods:{...(0,p.peC)(["setQRCode","setQRCodeSize"]),createCode(){if(!this.authUser.username)return;this.disabledSettings=!0;const e=new(m())({content:`${this.hostFull}/${this.authUser.username}?qr=1`,ecl:"H",width:this.size,height:this.size,join:!0}),t=(e.qrcode.modules.length+8)*this.dotSize;if(t!==this.size)return this.size=t,void this.createCode();const s=66,a=54,i=document.createElement("DIV"),o=(0,g.t4)().addTo(i).size(t,t),r=o.rect(t,t).fill("#fff");let n;if(o.svg(e.svg()),o.rect(s,s).center(t/2,t/2).attr({fill:"#fff","shape-rendering":"crispEdges"}),this.isShowAvatar&&this.authUser.avatar&&!this.avatarError){const e=o.circle(a).fill("#fff").center(t/2,t/2);n=o.clip().add(e)}if(this.isShowURL){const e=o.text(`${this.host}/${this.authUser.username}`).fill("#000");e.font({family:"Roboto, sans-serif",size:16*this.size/246}),e.bbox().w>t-48&&e.font({size:e.font("size")*(t-48)/e.bbox().w}),e.move(t/2,t-12),e.font({anchor:"middle"}),o.size(t,t+e.bbox().h),r.size(t,t+e.bbox().h),this.setQRCodeSize({width:t,height:t+e.bbox().h});let s=i.querySelector("svg").querySelector("defs");s||(s=document.createElement("defs"),i.querySelector("svg").prepend(s)),s.insertAdjacentHTML("afterbegin","<style>@import url(https://fonts.googleapis.com/css2?family=Roboto&display=swap)</style>")}else this.setQRCodeSize({width:t,height:t});if(this.isShowAvatar&&this.authUser.avatar&&!this.avatarError)this.toDataURL(this.authUser.avatar).then((e=>{const s=undefined;o.image(e).size(a,a).center(t/2,t/2).clipWith(n);const r=(new XMLSerializer).serializeToString(i.querySelector("svg"));this.setQRCode(`data:image/svg+xml;base64,${btoa(r)}`),this.disabledSettings=!1})).catch((()=>{this.disabledSettings=!1,this.isShowAvatar=!1,this.avatarError=!0}));else{o.svg(`<svg xmlns="http://www.w3.org/2000/svg" width="54" height="54" viewBox="0 0 400 400" x="${(this.size-a)/2}" y="${(this.size-a)/2}">\n            <path fill="#00aeef" d="M137.5 75a125 125 0 10125 125 125 125 0 00-125-125zm0 162.5A37.5 37.5 0 11175 200a37.45 37.45 0 01-37.5 37.5z"/>\n            <path fill="#008ccf" d="M278 168.75c31.76 9.14 69.25 0 69.25 0-10.88 47.5-45.38 77.25-95.13 80.87A124.73 124.73 0 01137.5 325L175 205.81C213.55 83.3 233.31 75 324.73 75h62.77c-10.5 46.25-46.69 81.58-109.5 93.75z"/>\n        </svg>`);const e=(new XMLSerializer).serializeToString(i.querySelector("svg"));this.setQRCode(`data:image/svg+xml;base64,${btoa(e)}`),this.disabledSettings=!1}},toDataURL(e){return new Promise(((t,s)=>{(0,v.l)(e).then((e=>{const a=window.URL.createObjectURL(new Blob([e])),i=new Image;i.onload=()=>{const e=document.createElement("canvas"),a=e.getContext("2d"),o=Math.min(i.naturalWidth,i.naturalHeight),r=Math.min(o,162);e.height=r,e.width=r,a.drawImage(i,-(i.naturalWidth-o)*r/(2*o),-(i.naturalHeight-o)*r/(2*o),i.naturalWidth*r/o,i.naturalHeight*r/o);try{t(e.toDataURL())}catch(n){s()}},i.onerror=()=>{s()},i.src=a}))}))}}},x,U,Q=(0,s(281656).A)(A,a,i,!1,null,"7c665247",null).exports},684912:function(e,t,s){s.d(t,{l:function(){return i}});var a=s(977434);const i=e=>a.Ay.get(e,{withCredentials:!1,responseType:"arraybuffer",headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}).then((e=>e.data)),o=e=>request.get(e,{withCredentials:!1,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}})},695231:function(e,t,s){s.d(t,{A:function(){return h}});var a=function e(){var t=this,s;return(0,t._self._c)("div",{staticClass:"b-settings"},[t._t("default")],2)},i=[],o,r={name:"SettingsWrapper"},n,l,h=(0,s(281656).A)(r,a,i,!1,null,"2b059710",null).exports},827753:function(e,t,s){s.d(t,{MD:function(){return o},vV:function(){return r}});var a=s(977434);const i=({message:e="",logData:t=null,logger:s="default",level:i="debug"})=>a.Ay.post(`${a.XV}/log`,{message:e,context:{...t,logger:`onlyfans.${s}`,time:+new Date},level:i}).then((e=>e.data)),o=({message:e="",logData:t=null,logger:s="default"})=>i({message:e,logData:t,logger:s,level:"debug"}),r=({message:e="",logData:t=null,logger:s="default"})=>i({message:e,logData:t,logger:s,level:"error"})}}]);