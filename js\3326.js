"use strict";(self.webpackChunkof_vue=self.webpackChunkof_vue||[]).push([[3326],{447778:function(t,e,s){s.d(e,{A:function(){return n}});var i=function t(){var e=this,s;return(0,e._self._c)("div",{staticClass:"b-list-titles"},[e._t("default")],2)},a=[],o,l={name:"AddToListsWrapper"},d,r,n=(0,s(281656).A)(l,i,a,!1,null,"f7c4795c",null).exports},503326:function(t,e,s){s.r(e),s.d(e,{default:function(){return M}});var i=function t(){var e=this,s=e._self._c;return e.isShow?s("add-to-lists-wrapper",{class:{"g-gray-text":e.hasMGray}},[e.isAddToUserList?s("button",{staticClass:"g-btn m-btn-icon m-reset-width m-flat m-with-round-hover m-size-sm-hover",attrs:{type:"button","at-attr":"add_to_list",disabled:e.shouldNotBeEdit||e.disabled},on:{click:e.openModal}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite:[iconClass]",arg:e.iconClass}]})]):e._e(),s("drag-scroll",{staticClass:"g-sides-r-gap"},[e.isAddToUserList?s("button",{staticClass:"g-btn m-flat m-link m-default-font-weight m-no-uppercase m-reset-width b-dot-item",attrs:{type:"button","at-attr":"add_to_list",disabled:e.post&&e.shouldNotBeEdit||e.disabled},on:{click:e.openModal}},[s("span",{staticClass:"b-list-titles__item__text"},[e._v(" "+e._s(e.textLabel)+" ")])]):e._e(),e._l(e.items,(function(t){return s("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.tooltip,expression:"item.tooltip"}],key:t.id,staticClass:"g-btn m-flat m-link m-default-font-weight m-no-uppercase m-reset-width b-dot-item",attrs:{to:t.route,replace:e.isListPage,disabled:!e.user&&e.shouldNotBeEdit||e.disabled}},[s("span",{staticClass:"b-list-titles__item__text"},[e._v(" "+e._s(t.title)+" ")])])}))],2)],1):e._e()},a=[],o=s(218111),l=s(22489),d=s(720116),r=s(161701),n=s(13579),h=s(962953),u=s(110908),p=s(608947),m=s(489464),c=s(447778),b=s(280822),f=s(957903),L=s(644781),g,_={name:"AddToListsBtns",components:{AddToListsWrapper:c.A,DragScroll:b.A},mixins:[p.A,m.Ay],props:{user:{type:Object,default:null},isAddToUserList:{type:Boolean,default:!0},post:{type:Object,default:null},createPostMode:{type:Boolean,default:!1},editPostMode:{type:Boolean,default:!1},toggleLabelFunc:{type:Function,default:null},draftPostLabels:{type:Array,default:()=>[]},hasMGray:{type:Boolean,default:!1},userPlaceholder:{type:String,default:""},isModal:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data(){return{createPostLabels:[],editPostLabels:!1,draftLabelsMerged:!1}},computed:{...(0,u.Oqn)(["getPostLabel"]),items(){const t=undefined,e={friends:{name:"MyFriends",params:{list:"friends"}},favorites:{name:"Favorites"},close_friends:{name:"CustomList",params:{list:"close_friends"}}},s=t=>this.user?e[t.type]||{name:"CustomList",params:{list:t.id}}:{name:"PostLabel",params:{id:t.id}};return(()=>{var t,e;return this.user?this.addedLists:this.post?this.createPostMode?null!==(e=this.draftPostLabels)&&void 0!==e&&e.length&&!this.draftLabelsMerged?this.draftPostLabels.map((t=>this.getPostLabel(t))).filter(Boolean):this.createPostLabels:this.editPostMode?this.editPostLabels||this.post.labelStates:(null===(t=this.post)||void 0===t?void 0:t.labelStates)||[]:[]})().map((t=>({...t,route:s(t),title:(0,f.iT)(this.tooltipMixin_truncateText(t.name)),tooltip:{content:this.tooltipMixin_getTooltipText(t.name)||"",boundariesElement:"m-link",classes:this.isModal?"m-tooltip-higher":""}})))},isListPage(){return L.w.some((t=>t.name===this.$route.name))},shouldNotBeEdit(){return"SavedForLater"===this.$route.name},mode(){return this.createPostMode?"create":this.editPostMode?"edit":"default"},isShow(){var t;const{isArchived:e=!1,isPrivateArchived:s=!1}=this.post||{},i=this.isAddToUserList||Boolean(null===(t=this.items)||void 0===t?void 0:t.length);return!e&&!s&&i},textLabel(){return this.user?this.items.length?this.$t("message.open_users_lists_btn_label"):this.userPlaceholder||this.$t("message.add_to_users_lists_btn_label"):this.items.length?this.$t("message.add_label_not_empty_labels"):this.$t("message.add_label_empty_labels")},iconClass(){return this.post?"icon-post-cat":"icon-list-add"+(this.items.length?"ed":"")}},watch:{draftPostLabels:{immediate:!0,handler(t,e){this.createPostMode&&!t.length&&e&&(this.createPostLabels=[])}}},methods:{...(0,u.tSh)(["setModalUser"]),openUsersListsModal(){this.user&&(this.setModalUser({userId:this.user.id}),this.$nextTick((()=>{this.$root.$emit("bv::show::modal","ModalUsersLists")})))},openModal(){this.post?this.openPostsLabelsModal():this.user&&this.openUsersListsModal()},openPostsLabelsModal(){this.post&&this.$nextTick((()=>{this.$root.$emit("showAddLabelsToPostModal",{postId:this.post.id,addedLabels:this.items,mode:this.mode,toggleCallBack:this.toggleLabelForPostCreate})}))},toggleLabelForPostCreate(t){let e;"create"===this.mode&&(this.draftPostLabels&&this.draftPostLabels.length&&!this.draftLabelsMerged&&(this.createPostLabels=this.items,this.draftLabelsMerged=!0),e="createPostLabels"),"edit"===this.mode&&(this.post&&!1===this.editPostLabels&&(this.editPostLabels=this.post.labelStates||[]),e="editPostLabels"),this[e].find((({id:e})=>e===t.id))?this[e]=this[e].filter((({id:e})=>e!==t.id)):this[e]=[...this[e],t],this.toggleLabelFunc&&this.toggleLabelFunc(this[e])}}},P,v,M=(0,s(281656).A)(_,i,a,!1,null,null,null).exports},608947:function(t,e,s){var i=s(218111),a=s.n(i),o=s(22489),l=s.n(o),d=s(720116),r=s.n(d),n=s(161701),h=s.n(n),u=s(517642),p=s.n(u),m=s(658004),c=s.n(m),b=s(733853),f=s.n(b),L=s(845876),g=s.n(L),_=s(432475),P=s.n(_),v=s(515024),M=s.n(v),y=s(731698),A=s.n(y),w=s(962953),C=s.n(w),x=s(953181);e.A={computed:{addedLists(){return this.user&&this.user.listsStates?[...new Set(this.user.listsStates.filter((({type:t,hasUser:e})=>!Object.values(x.kx).includes(t)&&e)).map((({id:t})=>t)))].map((t=>this.user.listsStates.find((e=>t===e.id)))):[]}}}}}]);