"use strict";(self.webpackChunkof_vue=self.webpackChunkof_vue||[]).push([[53430],{73691:function(e,t,n){n.d(t,{A:function(){return u}});var o=function e(){var t=this,n=t._self._c;return n("span",{class:t.wrapperExtendedClasses},[t.isHiddenIcon?t._e():n("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite:icon-like",arg:"icon-like"}],staticClass:"m-icon-sm"}),t._v(" "+t._s(t.preparedValue)+" ")])},s=[],i=n(631126),a,r={name:"UtilsLikes",props:{value:{type:Number,default:0},isHiddenIcon:{type:Boolean,default:!1}},computed:{preparedValue(){return(0,i.B4)(this.value)},isZeroValue(){return 0===Math.round(this.value)},wrapperExtendedClasses(){return[{"m-zero-value":this.isZeroValue}]}}},d,l,u=(0,n(281656).A)(r,o,s,!1,null,null,null).exports},130641:function(e,t,n){n.d(t,{GT:function(){return a},eo:function(){return d},pz:function(){return r}});var o=n(97200),s=n.n(o),i=n(13037);const a=(e,{className:t="pswp__icn"}={})=>{const n=document.createElement("svg");return t&&n.classList.add(t),(0,i.s)(n,{value:{icon:e}}),n.outerHTML||""},r=({id:e,entityId:t}={})=>{const n=e||s()("data-source-id-");return t?`${t}-${n}`:n},d=(e,t)=>{var n,o;return{photoswipeId:e,data:{type:null==t||null===(n=t.media)||void 0===n?void 0:n.type,mediaId:(null==t||null===(o=t.media)||void 0===o?void 0:o.id)||(null==t?void 0:t.id),entityId:null==t?void 0:t.entityId}}}},453430:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ye}});var o=function e(){var t=this,n=t._self._c;return n("div",{staticClass:"photoswipe-wrapper"},[t.isPhotoswipeOpen?n("photoswipe",{attrs:{options:t.photoswipeOptions,"data-source":t.photoswipeDataSource,"class-name":t.photoswipeClasses},on:{close:t.onPhotoswipeClosed,loadError:t.onPhotoswipeLoadError,photoswipe:t.savePhotoswipeInstance}},[n("photoswipe-media",{attrs:{media:t.currentMedia}})],1):t._e(),t.photoswipeInstance?n("photoswipe-modules",{attrs:{photoswipe:t.photoswipeInstance,"photoswipe-id":t.photoswipeId},on:{onMounted:t.loadAndOpenPhotoswipe}}):t._e()],1)},s=[],i=n(101900),a=n.n(i),r=n(97200),d=n.n(r),l=n(302404),u=n.n(l),p=n(218111),c=n(720116),h=n(161701),m=n(962953),v=n(885471),f=function e(){var t=this,n=t._self._c;return n("div",{staticClass:"photoswipe"},[t.isPhotoswipeMounted?[n("teleport",{attrs:{to:`#${t.photoswipeSlotsIds.root}`}},[t._t("default")],2),n("teleport",{attrs:{to:`#${t.photoswipeSlotsIds.wrapper}`}},[t._t("wrapper")],2),n("teleport",{attrs:{to:`#${t.photoswipeSlotsIds.bar}`}},[t._t("bar")],2)]:t._e(),n("div",{ref:"photoswipeRef"})],2)},w=[],b=n(501882),P=n.n(b),g=n(944114),O=n(607588),y=n(964979),_=n(271678),E={name:"teleport",props:{to:{type:String,required:!0},where:{type:String,default:"after"},disabled:Boolean},data:function e(){return{nodes:[],waiting:!1,observer:null,parent:null}},watch:{to:"maybeMove",where:"maybeMove",disabled:function e(t){var n=this;t?(this.disable(),this.$nextTick((function(){n.teardownObserver()}))):(this.bootObserver(),this.move())}},mounted:function e(){this.nodes=Array.from(this.$el.childNodes),this.disabled||this.bootObserver(),this.maybeMove()},beforeDestroy:function e(){this.nodes=this.getComponentChildrenNode(),this.disable(),this.teardownObserver()},computed:{classes:function e(){return this.disabled?["teleporter"]:["teleporter","hidden"]}},methods:{maybeMove:function e(){this.disabled||this.move()},move:function e(){if(this.waiting=!1,this.parent=document.querySelector(this.to),!this.parent)return this.disable(),void(this.waiting=!0);"before"===this.where?this.parent.prepend(this.getFragment()):this.parent.appendChild(this.getFragment())},disable:function e(){this.$el.appendChild(this.getFragment()),this.parent=null},getFragment:function e(){var t=document.createDocumentFragment();return this.nodes.forEach((function(e){return t.appendChild(e)})),t},onMutations:function e(t){for(var n=this,o=!1,s=0;s<t.length;s++){var i=t[s],a=Array.from(i.addedNodes).filter((function(e){return!n.nodes.includes(e)}));Array.from(i.removedNodes).includes(this.parent)?(this.disable(),this.waiting=!this.disabled):this.waiting&&a.length>0&&(o=!0)}o&&this.move()},bootObserver:function e(){var t=this;this.observer||(this.observer=new MutationObserver((function(e){return t.onMutations(e)})),this.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!1,characterData:!1}),this.childObserver||(this.childObserver=new MutationObserver((function(e){var n;e.find((function(e){return e.target===t.$el}))&&(t.nodes.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),t.nodes=t.getComponentChildrenNode(),t.maybeMove())})),this.childObserver.observe(this.$el,{childList:!0,subtree:!1,attributes:!1,characterData:!1})))},teardownObserver:function e(){this.observer&&(this.observer.disconnect(),this.observer=null),this.childObserver&&(this.childObserver.disconnect(),this.childObserver=null)},getComponentChildrenNode:function e(){return this.$vnode.componentOptions.children.map((function(e){return e.elm})).filter((function(e){return e}))}}};function A(e,t,n,o,s,i,a,r,d,l){"boolean"!=typeof a&&(d=r,r=a,a=!1);var u="function"==typeof n?n.options:n,p;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,s&&(u.functional=!0)),o&&(u._scopeId=o),i?(p=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,d(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=p):t&&(p=a?function(e){t.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,r(e))}),p)if(u.functional){var c=u.render;u.render=function e(t,n){return p.call(n),c(t,n)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,p):[p]}return n}var C="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase()),R;function M(e){return function(e,t){return T(e,t)}}var I={};function T(e,t){var n=C?t.media||"default":e,o=I[n]||(I[n]={ids:new Set,styles:[]});if(!o.ids.has(e)){o.ids.add(e);var s=t.source;if(t.map&&(s+="\n/*# sourceURL="+t.map.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),o.element||(o.element=document.createElement("style"),o.element.type="text/css",t.media&&o.element.setAttribute("media",t.media),void 0===R&&(R=document.head||document.getElementsByTagName("head")[0]),R.appendChild(o.element)),"styleSheet"in o.element)o.styles.push(s),o.element.styleSheet.cssText=o.styles.filter(Boolean).join("\n");else{var i=o.ids.size-1,a=document.createTextNode(s),r=o.element.childNodes;r[i]&&o.element.removeChild(r[i]),r.length?o.element.insertBefore(a,r[i]):o.element.appendChild(a)}}}var S=E,N=function(){var e=this,t=e.$createElement,n;return(e._self._c||t)("div",{class:e.classes},[e._t("default")],2)},L=[];N._withStripped=!0;var F,x,D,V,$=A({render:N,staticRenderFns:L},(function(e){e&&e("data-v-50f4b45b_0",{source:".hidden[data-v-50f4b45b] {\n  visibility: hidden;\n  display: none;\n}\n\n/*# sourceMappingURL=Teleport.vue.map */",map:{version:3,sources:["/home/shodan/Projects/vue2-teleport/src/Teleport.vue","Teleport.vue"],names:[],mappings:"AA2LA;EACA,kBAAA;EACA,aAAA;AC1LA;;AAEA,uCAAuC",file:"Teleport.vue",sourcesContent:["<template>\n  <div :class=\"classes\">\n    <slot/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'teleport',\n  props: {\n    to: {\n      type: String,\n      required: true,\n    },\n    where: {\n      type: String,\n      default: 'after',\n    },\n    disabled: Boolean,\n  },\n  data() {\n    return {\n      nodes: [],\n      waiting: false,\n      observer: null,\n      parent: null,\n    };\n  },\n  watch: {\n    to: 'maybeMove',\n    where: 'maybeMove',\n    disabled(value) {\n      if (value) {\n        this.disable();\n        // Ensure all event done.\n        this.$nextTick(() => {\n          this.teardownObserver();\n        });\n      } else {\n        this.bootObserver();\n        this.move();\n      }\n    },\n  },\n  mounted() {\n    // Store a reference to the nodes\n    this.nodes = Array.from(this.$el.childNodes);\n\n    if (!this.disabled) {\n      this.bootObserver();\n    }\n\n    // Move slot content to target\n    this.maybeMove();\n  },\n  beforeDestroy() {\n    // Fix nodes reference\n    this.nodes = this.getComponentChildrenNode();\n\n    // Move back\n    this.disable();\n\n    // Stop observing\n    this.teardownObserver();\n  },\n  computed: {\n    classes() {\n      if (this.disabled) {\n        return ['teleporter'];\n      }\n\n      return ['teleporter', 'hidden'];\n    },\n  },\n  methods: {\n    maybeMove() {\n      if (!this.disabled) {\n        this.move();\n      }\n    },\n    move() {\n      this.waiting = false;\n\n      this.parent = document.querySelector(this.to);\n\n      if (!this.parent) {\n        this.disable();\n\n        this.waiting = true;\n\n        return;\n      }\n\n      if (this.where === 'before') {\n        this.parent.prepend(this.getFragment());\n      } else {\n        this.parent.appendChild(this.getFragment());\n      }\n    },\n    disable() {\n      this.$el.appendChild(this.getFragment());\n      this.parent = null;\n    },\n    // Using a fragment is faster because it'll trigger only a single reflow\n    // See https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\n    getFragment() {\n      const fragment = document.createDocumentFragment();\n\n      this.nodes.forEach(node => fragment.appendChild(node));\n\n      return fragment;\n    },\n    onMutations(mutations) {\n      // Makes sure the move operation is only done once\n      let shouldMove = false;\n\n      for (let i = 0; i < mutations.length; i++) {\n        const mutation = mutations[i];\n        const filteredAddedNodes = Array.from(mutation.addedNodes).filter(node => !this.nodes.includes(node));\n\n        if (Array.from(mutation.removedNodes).includes(this.parent)) {\n          this.disable();\n          this.waiting = !this.disabled;\n        } else if (this.waiting && filteredAddedNodes.length > 0) {\n          shouldMove = true;\n        }\n      }\n\n      if (shouldMove) {\n        this.move();\n      }\n    },\n    bootObserver() {\n      if (this.observer) {\n        return;\n      }\n\n      this.observer = new MutationObserver(mutations => this.onMutations(mutations));\n\n      this.observer.observe(document.body, {\n        childList: true,\n        subtree: true,\n        attributes: false,\n        characterData: false,\n      });\n\n      if (this.childObserver) {\n        return;\n      }\n      // watch childNodes change\n      this.childObserver = new MutationObserver(mutations => {\n        const childChangeRecord = mutations.find(i => i.target === this.$el);\n        if (childChangeRecord) {\n          // Remove old nodes before update position.\n          this.nodes.forEach((node) => node.parentNode && node.parentNode.removeChild(node));\n          this.nodes = this.getComponentChildrenNode();\n          this.maybeMove();\n        }\n      });\n\n      this.childObserver.observe(this.$el, {\n        childList: true,\n        subtree: false,\n        attributes: false,\n        characterData: false,\n      });\n    },\n    teardownObserver() {\n      if (this.observer) {\n        this.observer.disconnect();\n        this.observer = null;\n      }\n      if (this.childObserver) {\n        this.childObserver.disconnect();\n        this.childObserver = null;\n      }\n    },\n    getComponentChildrenNode() {\n      return this.$vnode.componentOptions.children\n        .map((i) => i.elm)\n        .filter((i) => i);\n    },\n  },\n};\n<\/script>\n\n<style scoped lang=\"scss\">\n.hidden {\n  visibility: hidden;\n  display: none;\n}\n</style>\n",".hidden {\n  visibility: hidden;\n  display: none;\n}\n\n/*# sourceMappingURL=Teleport.vue.map */"]},media:void 0})}),S,"data-v-50f4b45b",!1,void 0,!1,M,void 0,void 0);function W(e){W.installed||(W.installed=!0,e.component("Teleport",$))}var U={install:W},k=null;"undefined"!=typeof window?k=window.Vue:void 0!==n.g&&(k=n.g.Vue),k&&k.use(U);var H=$,B=n(826489),G=n(362214),j=n(980471),q=n(178863),z=n(530546),Z=n(589354),X=n(683402),J={name:"Photoswipe",components:{Teleport:H},props:{options:{type:Object,default:()=>({})},dataSource:{type:Array,required:!0},className:{type:[String,Number,Object,Array],default:()=>({})}},setup(e,{emit:t}){const{options:o,dataSource:s,className:i}=(0,v.toRefs)(e),a=[],r=(0,v.computed)((()=>({...X._u,...o.value}))),l=(0,v.computed)((()=>{const e=undefined;return[...(0,z.y)(i.value),...(0,q.XK)(!r.value.clickToCloseNonZoomable,"pswp--prevent-click-close-nonzoomable")]}));let p=null;const c=(0,v.ref)(null),h={bar:d()("pswp__slot-bar-"),root:d()("pswp__slot-root-"),wrapper:d()("pswp__slot-wrapper-")},m=(0,v.ref)(!1);return(0,v.onMounted)((()=>{p=new G.A({...o.value,dataSource:structuredClone(s.value),gallery:c.value,pswpModule:()=>n.e(48300).then(n.bind(n,448300))}),new Z.A(p,(0,j.NE)(o.value.infinite)),p.on("uiRegister",(()=>{Object.values(X.ho).forEach((e=>{p.pswp.ui.registerElement({appendTo:e,name:`slot-${e}`,onInit:t=>{t.id=h[e]}})}))})),p.on("openingAnimationEnd",(()=>{B.isMobile&&p.pswp.updateSize(!0)})),p.on("afterInit",(()=>{m.value=!0,a.push((0,v.watch)(l,((e,t)=>{var n;(null===(n=p)||void 0===n||null===(n=n.pswp)||void 0===n?void 0:n.element)instanceof HTMLElement&&(Array.isArray(t)&&p.pswp.element.classList.remove(...t),Array.isArray(e)&&p.pswp.element.classList.add(...e))}),{deep:!0,immediate:!0})),a.push((0,v.watch)(r,(()=>{Object.assign(p.pswp.options,r.value)}),{deep:!0})),a.push((0,v.watch)(s,((e,t)=>{if(!e.length)return p.pswp.destroy();const{data:n={}}=p.pswp.currSlide||{},{uniqueId:o}=n||{};p.pswp.options.dataSource=(0,j.JX)(e),e.forEach(((e,n)=>{u()(e,t[n])||p.pswp.refreshSlideContent(n)}));const s=e.findIndex((({uniqueId:e})=>e===o));p.pswp.currIndex=s>=0?s:p.pswp.currIndex,p.pswp.goTo(p.pswp.currIndex),p.pswp.dispatch("dataSourceUpdated"),p.pswp.dispatch("change")}),{deep:!0}))})),p.on("contentLoadImage",(e=>{e.preventDefault()})),p.on("contentLoad",(e=>{var t;const{content:n}=e;if(!n.isImageContent())return;if(e.preventDefault(),null==n||null===(t=n.data)||void 0===t||!t.src)return void n.onError();const o=document.createElement("div");o.classList.add("pswp__img");const s=document.createElement("img");s.alt="",s.src=n.data.src,s.crossOrigin="anonymous",s.style.width="100%",s.style.pointerEvents="none",o.appendChild(s),n.element=o,n.state="loading";const i=()=>{const{naturalWidth:e,naturalHeight:t}=s;e&&t?(n.data.width===e&&n.data.height===t||(Object.assign(n,{width:e,height:t}),Object.assign(n.data,{width:e,height:t}),n.slide&&(Object.assign(n.slide,{width:e,height:t}),n.slide.resize())),n.onLoaded()):n.onError()};s.complete?i():(s.onload=i,s.onerror=n.onError)})),X.jH.forEach((e=>{p.on(e,((...n)=>t(e,...n)))})),t("photoswipe",p)})),(0,v.onBeforeUnmount)((()=>{p&&(p.destroy(),p=null,m.value=!1,a.forEach((e=>P()(e)&&e())))})),{photoswipe:p,photoswipeRef:c,photoswipeSlotsIds:h,isPhotoswipeMounted:m}}},K=J,Y=n(281656),Q,ee=(0,Y.A)(K,f,w,!1,null,"24e71186",null).exports,te=function e(){var t=this,n=t._self._c;return n("div",{staticClass:"b-wrapper"},[t.hasMediaCreatedDate?n("div",{staticClass:"pswp__header"},[n("utils-time",{staticClass:"timestamp",attrs:{date:t.mediaCreatedDate,type:"timeline"}})],1):t._e(),n("div",{staticClass:"pswp__footer"},[t.hasMediaCounters?n("div",{staticClass:"b-summary-list d-flex flex-wrap g-position-relative"},[n("div",{staticClass:"b-dot-item m-dot-bold"},[n("div",{staticClass:"b-summary-list__item m-lowercase g-md-text m-default-font-weight d-inline-block"},[n("utils-money",{attrs:{value:t.mediaTips}}),t._v(" "+t._s(t.$t("message.message_type_tip"))+" ")],1)]),n("div",{staticClass:"b-dot-item m-dot-bold"},[n("div",{staticClass:"b-summary-list__item m-lowercase g-md-text m-default-font-weight d-inline-block"},[n("utils-likes",{attrs:{value:t.mediaLikes,"is-hidden-icon":""}}),t._v(" "+t._s(t.$t("message.message_type_favorited"))+" ")],1)])]):t._e(),n("photoswipe-media-actions",{attrs:{media:t.media}})],1)])},ne=[],oe=n(88878),se=n(984330),ie=n(73691),ae=function e(){var t=this,n=t._self._c;return n("div",{staticClass:"photoswipe-media-actions"},[n("div",{staticClass:"g-btn__row"},[t.isEnabledMediaPosts?n("photoswipe-media-action",{staticClass:"m-goto-post",attrs:{"is-loading":t.isLoading},on:{click:t.onOpenChoosePost}},[t._v(" "+t._s(t.openPostButtonText)+" ")]):t._e(),t.isEnabledReleaseForm?n("photoswipe-media-action",{staticClass:"m-goto-post m-reset-width",on:{click:t.openReleaseForm}},[t._v(" "+t._s(t.$t("message.release_forms_title"))+" ")]):t._e()],1),t.isEnabledMediaPosts?n("modal-choose-post-to-go",{attrs:{posts:t.mediaPosts},on:{"go-to-post":t.openPost,"on-modal-hide":t.onCloseChoosePost,"infinite-load":t.infiniteLoadMediaPosts}}):t._e(),t.isOpenReleaseForm&&t.isEnabledReleaseForm?n("release-form-side-panel",{attrs:{context:t.releaseFormContext,"release-forms":t.attachedReleaseForms,"is-show-panel":t.isOpenReleaseForm},on:{"update:isShowPanel":function(e){t.isOpenReleaseForm=e},"update:is-show-panel":function(e){t.isOpenReleaseForm=e},addReleaseForms:t.attachReleaseForms}}):t._e()],1)},re=[],de=n(547822),le=n(16280),ue=n(13579),pe=n(203852),ce=n(47452),he=n(444962),me=n(600958),ve=n(893109),fe=n(809158),we=n(809277);function be(){const{routeName:e,routeParams:t}=(0,ce.A)(),n=(0,v.computed)((()=>{var n;return e.value===me.A.PROFILE_INNER&&we.q.includes(null===(n=t.value)||void 0===n?void 0:n.postType)})),o=undefined,s=undefined;return{isPostLabelPage:(0,v.computed)((()=>e.value===ve.A.POST_LABEL)),isMediaVaultPage:(0,v.computed)((()=>Object.values(fe.A).includes(e.value))),isProfileMediaPage:n}}var Pe=be,ge=n(977434),Oe=n(622479);function ye(e){if(!(0,v.isRef)(e))throw new Error('usePhotoswipeMediaPosts property "media" must be a Ref');const{store:t}=(0,pe.A)(),{t:n,tc:o}=(0,he.A)(),{resolve:s,push:i}=(0,ce.A)(),{isPostLabelPage:a,isMediaVaultPage:r,isProfileMediaPage:d}=Pe(),l=(0,v.computed)((()=>t.getters["auth/authUser"])),u=e=>{if(r.value||d.value)return l.value.username;const n=t.getters["users/getUser"],o=t.getters["posts/getPost"],[s]=o(e)||[],{id:i,username:a}=n(null==s?void 0:s.author)||{};return i?a:void 0},p=(0,v.ref)(0),c=(0,v.ref)(""),h=(0,v.computed)((()=>t.state.mediaVault.mediaPosts)),m=(0,v.computed)((()=>{var e;return null===(e=h.value)||void 0===e?void 0:e.length})),f=(0,v.computed)((()=>Boolean(m.value))),w=()=>t.commit("mediaVault/setMediaPosts",[]),b=(0,v.ref)(!1),P=async e=>{try{b.value=!0;const n=await t.dispatch("mediaVault/fetchMediaPosts",e)||{};return c.value=n.marker,n}finally{b.value=!1}},g=async t=>{p.value+=ge.Jg;const{hasMore:n}=await P({mediaId:e.value.id,offset:p.value,marker:c.value});n?t.loaded():t.complete()},O=(0,v.computed)((()=>f.value&&[d.value,r.value,a.value].some(Boolean))),y=(0,v.computed)((()=>m.value>1?o("message.view_post_btn_plural",m.value):n("message.go_to_post"))),_=e=>{const t=u(e),n={name:Oe.A.POST,params:{postId:e,userId:t}};if(r.value||d.value){const{href:e}=s(n);window.open(e,"_blank")}else i(n)};return(0,v.watch)(e,(async()=>{var t;p.value=0,null!==(t=e.value)&&void 0!==t&&t.hasPosts?await P({mediaId:e.value.id}):w()}),{immediate:!0}),{mediaPosts:h,hasMediaPosts:f,mediaPostsLength:m,openPostButtonText:y,isLoadingMediaPosts:b,isEnabledMediaPosts:O,openPost:_,infiniteLoadMediaPosts:g}}var _e=ye,Ee=n(411331),Ae=n.n(Ee),Ce=n(378347);function Re(e){if(!(0,v.isRef)(e))throw new Error('usePhotoswipeMediaPosts property "media" must be a Ref');const{store:t}=(0,pe.A)(),{EVENTS:n,$emit:o}=(0,de.A)(),{routeName:s}=(0,ce.A)(),i=(0,v.computed)((()=>t.getters["auth/authUser"])),a=(0,v.computed)((()=>Object.values(fe.A).includes(s.value))),r=(0,v.computed)((()=>Ae()(e.value)&&["id","createdAt"].every((t=>Object.hasOwn(e.value,t))))),d=(0,v.computed)((()=>{var e;return r.value&&a.value&&Boolean(null===(e=i.value)||void 0===e?void 0:e.isPerformer)})),l=(0,v.ref)(!1),u=()=>{l.value=!0},p="vault",c=(0,v.computed)((()=>{var t;return Array.isArray(null===(t=e.value)||void 0===t?void 0:t.releaseForms)?e.value.releaseForms:[]})),h=async s=>{const i=Array.isArray(s)?s:[];await t.dispatch("mediaVault/attachReleaseFormsToVaultMedia",{mediaId:e.value.id,releaseForms:i}),o(n.MEDIA_VAULT.ADDED_TAG)};return(0,v.watch)(l,(()=>{o(n.PHOTOSWIPE_WRAPPER.UPDATE_OPTIONS,{arrowKeys:!l.value})})),{isOpenReleaseForm:l,releaseFormContext:p,attachedReleaseForms:c,isEnabledReleaseForm:d,openReleaseForm:u,attachReleaseForms:h}}var Me=Re;const Ie=undefined,Te=undefined,Se=undefined;var Ne,Le={name:"PhotoswipeMediaActions",components:{ReleaseFormSidePanel:()=>Promise.all([n.e(61594),n.e(5693),n.e(1601),n.e(22193),n.e(15077),n.e(96085),n.e(86433),n.e(53959),n.e(15818),n.e(68984),n.e(49868),n.e(67959),n.e(14363),n.e(47863),n.e(59072),n.e(39993)]).then(n.bind(n,177425)),ModalChoosePostToGo:()=>Promise.all([n.e(96085),n.e(67959),n.e(13950)]).then(n.bind(n,131184)),PhotoswipeMediaAction:()=>n.e(56263).then(n.bind(n,856263))},props:{media:{type:Object,required:!0}},setup(e){const{media:t}=(0,v.toRefs)(e),{proxy:n}=(0,v.getCurrentInstance)(),{EVENTS:o,$emit:s}=(0,de.A)(),{mediaPosts:i,mediaPostsLength:a,openPostButtonText:r,isLoadingMediaPosts:d,isEnabledMediaPosts:l,openPost:u,infiniteLoadMediaPosts:p}=_e(t),{isOpenReleaseForm:c,releaseFormContext:h,isEnabledReleaseForm:m,attachedReleaseForms:f,attachReleaseForms:w,openReleaseForm:b}=Me(t),P=()=>{if(a.value>1)n.$root.$emit("bv::show::modal","ModalChoosePostToGo"),s(o.PHOTOSWIPE_WRAPPER.UPDATE_OPTIONS,{arrowKeys:!1});else{const[{id:e}]=i.value;u(e)}},g=()=>{s(o.PHOTOSWIPE_WRAPPER.UPDATE_OPTIONS,{arrowKeys:!0})},O=(0,v.computed)((()=>d.value));return{isOpenReleaseForm:c,releaseFormContext:h,isEnabledReleaseForm:m,attachedReleaseForms:f,openReleaseForm:b,attachReleaseForms:w,mediaPosts:i,openPostButtonText:r,isEnabledMediaPosts:l,isLoadingMediaPosts:d,openPost:u,infiniteLoadMediaPosts:p,isLoading:O,onOpenChoosePost:P,onCloseChoosePost:g}}},Fe,xe=(0,Y.A)(Le,ae,re,!1,null,null,null).exports,De=n(981148),Ve=n(974353),$e=n.n(Ve);function We(e){if(!(0,v.isRef)(e))throw new Error('usePhotoswipeMediaInfo property "media" must be a Ref');const{isMediaVaultPage:t,isProfileMediaPage:n}=Pe(),o=(0,v.computed)((()=>{var t;return null===(t=e.value)||void 0===t||null===(t=t.counters)||void 0===t?void 0:t.tipsSumm})),s=(0,v.computed)((()=>{var t;return null===(t=e.value)||void 0===t||null===(t=t.counters)||void 0===t?void 0:t.likesCount})),i=(0,v.computed)((()=>{var t;return null===(t=e.value)||void 0===t?void 0:t.createdAt})),a=(0,v.computed)((()=>i.value&&$e()(i.value).isValid())),r=(0,v.computed)((()=>{const e=[n.value,t.value].some(Boolean),i=undefined;return[o.value,s.value].every((e=>!isNaN(e)))&&e})),d=(0,v.computed)((()=>{var t,n;return null!==(t=null===(n=e.value)||void 0===n?void 0:n.type)&&void 0!==t?t:we.Z.PHOTO})),l=(0,v.computed)((()=>[we.Z.VIDEO,we.Z.GIF].includes(d.value)));return{mediaType:d,mediaTips:o,mediaLikes:s,hasMediaCounters:r,mediaCreatedDate:i,isMediaVaultPage:t,isMediaVideoType:l,isProfileMediaPage:n,hasMediaCreatedDate:a}}var Ue=We,ke,He={name:"PhotoswipeMediaInfo",components:{PhotoswipeMediaActions:xe,UtilsTime:oe.A,UtilsLikes:ie.A,UtilsMoney:se.A},props:{media:{type:Object,required:!0}},setup(e){const{media:t}=(0,v.toRefs)(e),{mediaTips:n,mediaLikes:o,mediaCreatedDate:s,hasMediaCounters:i,hasMediaCreatedDate:a}=Ue(t);return{mediaTips:n,mediaLikes:o,mediaCreatedDate:s,hasMediaCounters:i,hasMediaCreatedDate:a}}},Be,Ge=(0,Y.A)(He,te,ne,!1,null,null,null).exports,je=n(808874),qe=n(724022),ze=n(130641);const Ze=undefined;var Xe,Je={name:"PhotoswipeWrapper",components:{Photoswipe:ee,PhotoswipeMedia:Ge,PhotoswipeModules:()=>Promise.all([n.e(14418),n.e(68326),n.e(74514),n.e(52977),n.e(67700),n.e(8695),n.e(77152),n.e(94784),n.e(60182),n.e(15752),n.e(58925),n.e(82357),n.e(30711),n.e(26237),n.e(23380)]).then(n.bind(n,155517))},setup(){const{route:e}=(0,ce.A)(),{t:t}=(0,he.A)(),{EVENTS:n,$emit:o,setEventListener:s}=(0,de.A)(),{enableBodyScroll:i,disableBodyScroll:r,TOGGLE_BODY_SCROLL_IDS:l}=(0,je.A)(),{isPhotoswipeOpen:p,setPhotoswipeOpen:c}=(0,qe.A)(),h=(0,v.ref)(null),m=(0,v.ref)(null),f=(0,v.computed)((()=>{var e;return null===(e=m.value)||void 0===e||null===(e=e.pswp)||void 0===e?void 0:e.currIndex})),w=(0,v.computed)((()=>{var e;const{isOpen:t,isDestroying:n}=(null===(e=m.value)||void 0===e?void 0:e.pswp)||{};return t&&!n})),b=(0,v.ref)([]),P=e=>{b.value=(0,j.JX)(e).map((e=>{const{id:t,entityId:n}=e||{};return{...e,uniqueId:(0,ze.pz)({id:t,entityId:n})}}))},g=()=>({index:0,zoom:!1,loop:!1,counter:!0,infinite:!1,infiniteHandler:null,trapFocus:!1,bgOpacity:.4,preloaderDelay:0,clickToCloseNonZoomable:!1,errorMsg:t("message.image_load_error"),closeSVG:(0,ze.GT)("icon-close"),arrowPrevSVG:(0,ze.GT)("icon-arrow-left"),arrowNextSVG:(0,ze.GT)("icon-arrow-left")}),O=(0,v.ref)(g()),y=(e={})=>{O.value={...g(),...(0,j.NE)(e)}},_=(0,v.computed)((()=>b.value[f.value])),E=(0,v.computed)((()=>{var e;return(null===(e=_.value)||void 0===e?void 0:e.media)||{}})),{isMediaVideoType:A,mediaType:C}=Ue(E),R=(0,v.computed)((()=>["b-wrapper",`is-${C.value}`,{"m-video":A.value}])),M=({content:e})=>{e.isImageContent()&&o(n.PHOTOSWIPE_WRAPPER.ERROR.IMAGE,(0,ze.eo)(h.value,e.data))},I=()=>{c(!1),P([]),y({}),m.value=null,i(l.UTILS.PHOTO_SWIPE),o(n.PHOTOSWIPE_WRAPPER.CLOSED)},T=({content:e})=>{if(!a()(e.element))return;const t=(0,v.toRef)(e.data,"media"),{hasMediaCounters:n}=Ue(t);e.element.classList.toggle("m-full-height",!n.value)},S=()=>{const e=undefined;m.value.pswp.ui.uiElementsData.find((({name:e})=>"preloader"===e)).html=(0,ze.GT)("icon-loading")},N=(0,v.computed)((()=>{var e,t,n;if(null===(e=O.value)||void 0===e||!e.fileId)return(null===(t=O.value)||void 0===t?void 0:t.index)||0;const o=b.value.findIndex((({fileId:e})=>e===O.value.fileId));return o>=0?o:(null===(n=O.value)||void 0===n?void 0:n.index)||0})),L=()=>{m.value.init(),m.value.loadAndOpen(N.value),m.value.on("uiRegister",S),m.value.on("contentAppend",T),r(l.UTILS.PHOTO_SWIPE)},F=e=>{m.value=e},x=async({dataSource:e,options:t,id:n}={})=>{h.value=n||d()("photoswipe-id-"),P(e),y(t),c(!0)},D=async()=>{w.value&&m.value.pswp.destroy()};return(0,v.watch)(e,((e,t)=>{p.value&&m.value&&!u()(e,t)&&o(n.PHOTOSWIPE_WRAPPER.CLOSE)})),s(n.PHOTOSWIPE_WRAPPER.OPEN,x),s(n.PHOTOSWIPE_WRAPPER.CLOSE,D),s(n.PHOTOSWIPE_WRAPPER.UPDATE_OPTIONS,y),s(n.PHOTOSWIPE_WRAPPER.UPDATE_DATA_SOURCE,P),s([n.PHOTOSWIPE_WRAPPER.ERROR.IMAGE,n.PHOTOSWIPE_WRAPPER.ERROR.AUDIO,n.PHOTOSWIPE_WRAPPER.ERROR.VIDEO],(e=>{o(n.PHOTOSWIPE_WRAPPER.ERROR.MEDIA,e)})),{currentMedia:E,photoswipeId:h,isPhotoswipeOpen:p,photoswipeClasses:R,photoswipeOptions:O,photoswipeInstance:m,photoswipeDataSource:b,onPhotoswipeClosed:I,onPhotoswipeLoadError:M,loadAndOpenPhotoswipe:L,savePhotoswipeInstance:F}}},Ke,Ye=(0,Y.A)(Je,o,s,!1,null,null,null).exports},724022:function(e,t,n){var o=n(553812),s=n.n(o),i=n(885471);const a=(0,i.ref)(!1),r=e=>{s()(e)&&(a.value=e)};function d(){return{isPhotoswipeOpen:(0,i.readonly)(a),setPhotoswipeOpen:r}}t.A=d},809277:function(e,t,n){n.d(t,{Z:function(){return o},q:function(){return s}});const o={GIF:"gif",AUDIO:"audio",VIDEO:"video",PHOTO:"photo"},s=["media","videos","photos","audios"]},984330:function(e,t,n){n.d(t,{A:function(){return p}});var o=function e(){var t=this,n;return(0,t._self._c)("span",{class:t.wrapperExtendedClasses},[t._v(" "+t._s(t.formattedCurrencyValue)+" ")])},s=[],i=n(277832),a=n(631126),r,d={name:"UtilsMoney",props:{currency:{type:String,default:"usd"},value:{type:[String,Number],default:""},decimalPlaces:{type:Number,default:2}},computed:{numericalValue(){return Number.isNaN(this.value)?0:Number(this.value)},formattedNumericalValue(){const e=this.numericalValue.toFixed(this.decimalPlaces);return(0,a.Hi)(e)},formattedCurrencyValue(){let e;try{e=i.G.format(this.formattedNumericalValue,this.currency.toLowerCase())}catch(t){e=this.formattedNumericalValue}return e},isZeroValue(){return 0===Math.round(this.numericalValue)},wrapperExtendedClasses(){return[{"m-zero-value":this.isZeroValue}]}}},l,u,p=(0,n(281656).A)(d,o,s,!1,null,null,null).exports}}]);