"use strict";(self.webpackChunkof_vue=self.webpackChunkof_vue||[]).push([[3772],{3772:function(e,t,n){n.d(t,{$B:function(){return F},Sd:function(){return a},T2:function(){return w}});var r=n(238262),o=n(742225);const l=["ol",0],i=["ul",0],d=["li",0],u={attrs:{order:{default:1,validate:"number"}},parseDOM:[{tag:"ol",getAttrs(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM(e){return 1==e.attrs.order?l:["ol",{start:e.attrs.order},0]}},c={parseDOM:[{tag:"ul"}],toDOM(){return i}},p={parseDOM:[{tag:"li"}],toDOM(){return d},defining:!0};function s(e,t){let n={};for(let r in e)n[r]=e[r];for(let r in t)n[r]=t[r];return n}function f(e,t,n){return e.append({ordered_list:s(u,{content:"list_item+",group:n}),bullet_list:s(c,{content:"list_item+",group:n}),list_item:s(p,{content:t})})}function a(e,t=null){return function(n,r){let{$from:o,$to:l}=n.selection,i=o.blockRange(l);if(!i)return!1;let d=r?n.tr:null;return!!m(d,i,e,t)&&(r&&r(d.scrollIntoView()),!0)}}function m(e,t,n,l=null){let i=!1,d=t,u=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=u.resolve(t.start-2);d=new o.u$(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new o.u$(t.$from,u.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let c=(0,r.oM)(d,n,l,t);return!!c&&(e&&h(e,t,c,i,n),!0)}function h(e,t,n,l,i){let d=o.FK.empty;for(let r=n.length-1;r>=0;r--)d=o.FK.from(n[r].type.create(n[r].attrs,d));e.step(new r.Wg(t.start-(l?2:0),t.end,t.start,t.end,new o.Ji(d,0,0),n.length,!0));let u=0;for(let r=0;r<n.length;r++)n[r].type==i&&(u=r+1);let c=n.length-u,p=t.start+n.length-(l?2:0),s=t.parent;for(let o=t.startIndex,f=t.endIndex,a=!0;o<f;o++,a=!1)!a&&(0,r.zy)(e.doc,p,c)&&(e.split(p,c),p+=2*c),p+=s.child(o).nodeSize;return e}function y(e,t){return function(n,r){let{$from:o,$to:l,node:i}=n.selection;if(i&&i.isBlock||o.depth<2||!o.sameParent(l))return!1;let d=o.node(-1);if(d.type!=e)return!1;if(0==o.parent.content.size&&o.node(-1).childCount==o.indexAfter(-1)){if(3==o.depth||o.node(-3).type!=e||o.index(-2)!=o.node(-2).childCount-1)return!1;if(r){let t=Fragment.empty,l=o.index(-1)?1:o.index(-2)?2:3;for(let e=o.depth-l;e>=o.depth-3;e--)t=Fragment.from(o.node(e).copy(t));let i=o.indexAfter(-1)<o.node(-2).childCount?1:o.indexAfter(-2)<o.node(-3).childCount?2:3;t=t.append(Fragment.from(e.createAndFill()));let d=o.before(o.depth-(l-1)),u=n.tr.replace(d,o.after(-i),new Slice(t,4-l,0)),c=-1;u.doc.nodesBetween(d,u.doc.content.size,((e,t)=>{if(c>-1)return!1;e.isTextblock&&0==e.content.size&&(c=t+1)})),c>-1&&u.setSelection(Selection.near(u.doc.resolve(c))),r(u.scrollIntoView())}return!0}let u=l.pos==o.end()?d.contentMatchAt(0).defaultType:null,c=n.tr.delete(o.pos,l.pos),p=u?[t?{type:e,attrs:t}:null,{type:u}]:void 0;return!!canSplit(c.doc,o.pos,2,p)&&(r&&r(c.split(o.pos,2,p).scrollIntoView()),!0)}}function g(e,t){let n=y(e,t);return(e,t)=>n(e,t&&(n=>{let r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();r&&n.ensureMarks(r),t(n)}))}function w(e){return function(t,n){let{$from:r,$to:o}=t.selection,l=r.blockRange(o,(t=>t.childCount>0&&t.firstChild.type==e));return!!l&&(!n||(r.node(l.depth-1).type==e?$(t,n,e,l):x(t,n,l)))}}function $(e,t,n,l){let i=e.tr,d=l.end,u=l.$to.end(l.depth);d<u&&(i.step(new r.Wg(d-1,u,d,u,new o.Ji(o.FK.from(n.create(null,l.parent.copy())),1,0),1,!0)),l=new o.u$(i.doc.resolve(l.$from.pos),i.doc.resolve(u),l.depth));const c=(0,r.jP)(l);if(null==c)return!1;i.lift(l,c);let p=i.mapping.map(d,-1)-1;return(0,r.n9)(i.doc,p)&&i.join(p),t(i.scrollIntoView()),!0}function x(e,t,n){let l=e.tr,i=n.parent;for(let r=n.end,o=n.endIndex-1,h=n.startIndex;o>h;o--)r-=i.child(o).nodeSize,l.delete(r-1,r+1);let d=l.doc.resolve(n.start),u=d.nodeAfter;if(l.mapping.map(n.end)!=n.start+d.nodeAfter.nodeSize)return!1;let c=0==n.startIndex,p=n.endIndex==i.childCount,s=d.node(-1),f=d.index(-1);if(!s.canReplace(f+(c?0:1),f+1,u.content.append(p?o.FK.empty:o.FK.from(i))))return!1;let a=d.pos,m=a+u.nodeSize;return l.step(new r.Wg(a-(c?1:0),m+(p?1:0),a+1,m-1,new o.Ji((c?o.FK.empty:o.FK.from(i.copy(o.FK.empty))).append(p?o.FK.empty:o.FK.from(i.copy(o.FK.empty))),c?0:1,p?0:1),c?0:1)),t(l.scrollIntoView()),!0}function F(e){return function(t,n){let{$from:l,$to:i}=t.selection,d=l.blockRange(i,(t=>t.childCount>0&&t.firstChild.type==e));if(!d)return!1;let u=d.startIndex;if(0==u)return!1;let c=d.parent,p=c.child(u-1);if(p.type!=e)return!1;if(n){let l=p.lastChild&&p.lastChild.type==c.type,i=o.FK.from(l?e.create():null),u=new o.Ji(o.FK.from(e.create(null,o.FK.from(c.type.create(null,i)))),l?3:1,0),s=d.start,f=d.end;n(t.tr.step(new r.Wg(s-(l?3:1),f,s,f,u,1,!0)).scrollIntoView())}return!0}}}}]);