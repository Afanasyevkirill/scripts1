"use strict";(self.webpackChunkof_vue=self.webpackChunkof_vue||[]).push([[15077],{281436:function(e,s,t){t.r(s),t.d(s,{default:function(){return g}});var i=function e(){var s=this,t=s._self._c;return t(s.isLink?"a":"span",s._b({tag:"component",staticClass:"g-avatar",class:s.classes,on:{click:s.clickOnAvatarHandler}},"component",s.componentProps,!1),[s.openseaInfo.isSetAvatar&&s.isShowLive?t("div",{staticClass:"b-hexagon-icon"}):s._e(),t("image-thumb",{attrs:{user:s.userComputed,size:s.size,"is-nft-avatar":s.openseaInfo.isSetAvatar}}),s.openseaInfo.isSetAvatar?t("div",{staticClass:"b-hexagon-el"}):s._e(),s.userComputed.isBlocked||s.isMyProfileHasScenario?s._e():[s.isLive||s.isLiveSchedule||s.isMute||s.isPlus?t("span",{staticClass:"g-avatar__icon",class:{"m-mute":s.isMute,"m-plus":s.isPlus,"m-live":s.isLive||s.isLiveSchedule}},[t("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite:[statusClassName]",arg:s.statusClassName}]})]):s._e(),s.openseaInfo.hasNft&&!s.hideNftIcon?t("span",{directives:[{name:"tooltip",rawName:"v-tooltip.enabled",value:s.openseaTooltipOptions,expression:"openseaTooltipOptions",modifiers:{enabled:!0}}],staticClass:"g-avatar__icon m-opensea-label",on:{click:s.onNftLogoClick}},[t("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite:[openseaIconComputed]",arg:s.openseaIconComputed}],staticClass:"m-icon-exception"})]):s._e()],s._t("default")],2)},r=[],o=t(858156),a=t.n(o),n=t(944114),u=t(218111),h=t(720116),l=t(110908),d=t(433032),p=t(22193),m=t(716228),c=t(571441),f=t(561594),v,S={name:"UserAvatar",components:{ImageThumb:p.A},mixins:[m.A,c.A,f.A],props:{size:{type:[Number,String],default:36},isLink:{type:Boolean,default:!0},link:{type:[String,Object],default:""},userId:{type:Number,default:0},user:{type:Object,default:()=>({})},hideOnline:{type:Boolean,default:!1},forceLive:{type:Boolean,default:!1},shareResponse:{type:Boolean,default:!1},runStoryAndStreamOnly:{type:Boolean,default:!1},disableStoryFunctionality:{type:Boolean,default:!1},canRunStream:{type:Boolean,default:!1},scheduledStream:{type:Boolean,default:!1},forceDarkMode:{type:Boolean,default:!1},showNftTooltip:{type:Boolean,default:!1},disableNftLogoClick:{type:Boolean,default:!1},hideNftIcon:{type:Boolean,default:!1},showPreviewModal:{type:Boolean,default:!1}},computed:{...(0,l.ZOz)(["getUser"]),...(0,l.GF1)(["streams"]),...(0,l.npG)(["authUser","isAuth"]),...(0,l.RAO)(["darkMode"]),...(0,l.why)(["scenario"]),linkToProfile(){const e=undefined;return this.$router.resolve({name:"Profile",params:{userId:this.userComputed.username}}).href},userComputed(){return this.user&&Object.keys(this.user).length?this.user:this.getUser(this.userId)},shouldOpenStoryOnThisPage(){return!this.disableStoryFunctionality&&["Feed","Profile","ProfileInner","Gallery","Chats","Post","Chat","ChatsSend"].includes(this.$route.name)},classes(){return{"m-guest":!this.isAuth,online_status_class:this.forceLive||!this.hideOnline,online:!this.forceLive&&!this.hideOnline&&(!this.userComputed.hasStream||this.userComputed.isRestricted)&&this.isOnline&&!this.shareResponse&&!this.scheduledStream,"m-muted-by-me":!this.forceLive&&this.isShowRestricted,[`m-w${this.size}`]:this.size,"has-story g-pointer-cursor":this.userComputed.hasStories&&this.shouldOpenStoryOnThisPage&&!this.userComputed.isBlocked&&!this.isMyProfileHasScenario,"has-new-story":this.userComputed.hasNotViewedStory&&this.shouldOpenStoryOnThisPage&&!this.userComputed.isBlocked&&!this.isMyProfileHasScenario,"has-started-stream":this.isShowLive,"m-hexagon-form":this.openseaInfo.isSetAvatar,"m-improve-display-avatar":d.D}},isShowRestricted(){return!this.hideOnline&&this.userComputed.isRestricted&&!this.userComputed.isBlocked},isShowLive(){return(this.forceLive||!this.hideOnline&&!this.userComputed.isRestricted&&this.userComputed.hasStream)&&!this.userComputed.isBlocked&&!this.isMyProfileHasScenario},userStream(){return(this.streams||[]).find((e=>e.user===this.userComputed.id&&(e.isActive||!e.isScheduled)))},openseaIconComputed(){return"icon-logo-ethereum-"+(this.darkMode||this.forceDarkMode?"dark":"light")},openseaInfo:e=>a()(e.userComputed,"openseaInfo",{}),openseaTooltipOptions(){return this.showNftTooltip&&this.openseaInfo.openseaProfileLink?{content:this.$t("message.opensea_avatar_link_title",{LINK:this.openseaInfo.openseaProfileLink}),classes:"m-tooltip-higher m-link",delay:{hide:500},autoHide:!1,html:!0}:{}},componentProps(){return this.isLink?{href:this.linkToProfile}:{}},canOpenStream(){return this.isLink&&!this.disableStoryFunctionality&&this.canRunStream&&this.userComputed.hasStream&&!this.userComputed.isRestricted&&!this.userComputed.isBlocked&&!this.isMyProfileHasScenario&&this.userStream},canOpenPaidStream(){return this.canOpenStream&&!this.userStream.isOpened&&this.userStream.price>0},isMyProfileHasScenario(){var e;return this.isAuth&&this.isAuthUser&&!(null===(e=this.scenario)||void 0===e||!e.action)},isLive(){return this.isShowLive&&!this.shareResponse&&!this.scheduledStream},isLiveSchedule(){return this.scheduledStream&&!this.shareResponse},isMute(){return this.isShowRestricted&&!this.shareResponse&&!this.scheduledStream},isPlus(){return this.shareResponse&&!this.scheduledStream},statusClassName(){return this.isLive?"icon-live":this.isLiveSchedule?"icon-calendar":this.isMute?"icon-mute":this.isPlus?"icon-compose":""},canShowAvatarPreviewForGuest(){var e;return!(null!==(e=this.userComputed)&&void 0!==e&&e.hasStory||this.canOpenStream||this.isAuth)},isAuthUser(){return this.userComputed.id===this.authUser.id},isOnline(){const{isVisibleOnline:e,isOnline:s,isActiveViewer:t}=this.userComputed;return this.isAuthUser?e:s||t}},methods:{getAvatarPreviewOptions(){return{src:this.userComputed.avatar,w:0,h:0}},async clickOnAvatarHandler(e){if(this.isLink&&e.preventDefault(),this.isLink&&!this.isMyProfileHasScenario&&!this.disableStoryFunctionality){if(this.canOpenStream)return this.canOpenPaidStream?void this.payForStream(this.userStream,this.userComputed):void this.goToStream(this.userComputed);if(this.userComputed){const{isBlocked:e,canLookStory:s,hasStories:t}=this.userComputed;if(!e&&s&&t&&this.shouldOpenStoryOnThisPage)return void this.runUserStory(this.userComputed)}if(this.runStoryAndStreamOnly)return;if(this.$el.closest("#ModalSubscribersItem"))return void this.$router.push({name:"Profile",params:{userId:this.userComputed.username}});const e=await this.maybeOpenCard(this.userComputed.id);!this.showPreviewModal||e&&!this.canShowAvatarPreviewForGuest||this.showPreview()}},showPreview(){var e;null!==(e=this.userComputed)&&void 0!==e&&e.avatar&&this.showPhotoSwipe({index:0})},async runUserStory(e){this.$root.$emit("component::story::run",{users:[e.id]})},onNftLogoClick(e){this.disableNftLogoClick||(e.preventDefault(),e.stopPropagation(),this.$router.push({name:"NftGallery",params:{userId:this.userComputed.username}}))}}},y,C,g=(0,t(281656).A)(S,i,r,!1,null,"2501366e",null).exports},571441:function(e,s,t){var i=t(858156),r=t.n(i),o=t(944114),a=t.n(o),n=t(305693),u=t(191646);s.A={mixins:[n.A,u.wd],methods:{goToStream(e){this.$router.push({name:"Live",params:{user:e.username}})},async payForStream(e,s){const t=r()(s,"id",!1),i=await this.makePayments({paymentType:"stream",streamId:e.id,amount:e.price,modalTitle:this.$t("message.confirm_stream_payment_title"),userId:t},(()=>this.payForStream(e,s)));i&&i.success&&this.goToStream(s),this.clicked=!1,this.clickedOnPay=!1}}}}}]);