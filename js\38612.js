(self.webpackChunkof_vue=self.webpackChunkof_vue||[]).push([[38612],{88878:function(e,t,s){"use strict";s.d(t,{A:function(){return v}});var i=function e(){var t=this,s=t._self._c;return t.html?s("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:{text:t.prettierDate},expression:"{ text: prettierDate }"}],staticClass:"datetime",attrs:{title:t.prettierDateFull}}):s("span",{attrs:{title:t.prettierDateFull}},[t._v(" "+t._s(t.prettierDate)+" ")])},r=[],o=s(218111),a=s(161701),n=s(974353),l=s.n(n),u=s(853581),m=s.n(u),d=s(343522),c=s.n(d),p=s(606279),h=s.n(p);l().extend(c()),l().extend(m()),l().extend(h());var _={name:"UtilsTime",props:{type:{type:String,default:"feed"},date:{type:[String,Number,Date],default:""},html:{type:Boolean,default:!1},relativeTimeFormat:{type:String,default:"full"}},data(){return{prettierDate:"",prettierDateFull:"",interval:null}},computed:{is24hrFormatLocale(){return["it","fr","de","es","ja","pt","ro","ru","uk","zh"].includes(this.$i18n.locale)},monthDayFormat(){return this.is24hrFormatLocale?"D MMM":"MMM D"},timeFormat(){return this.is24hrFormatLocale?"H:mm":"h:mm a"},relativeTime(){const e={future:"in %s",past:"%s ago",s:"seconds",ss:"%d seconds",m:"1 minute",mm:"%d minutes",h:"1 hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};return"short"===this.relativeTimeFormat&&(e.s="%ds",e.ss="%ds",e.m="1m",e.mm="%dm",e.h="1h",e.hh="%dh"),e}},watch:{date(){this.updateMoment()},"$i18n.locale"(){this.updateMoment()}},mounted(){this.updateMoment(),this.$root.$on("updateTime",this.updateMoment)},beforeDestroy(){this.$root.$off("updateTime",this.updateMoment)},methods:{updateMoment(){this.dayJsUpdateLocale();const e=e=>e instanceof Date&&!Number.isNaN(e);if(this.$nextTick((()=>{this.$emit("time",this.prettierDate)})),!e(new Date(this.date)))return void(this.prettierDate="");const t=l()(this.date),s=l()();if("setting-sessions"===this.type)return void(this.prettierDate=t.format(`M/D/YY ${this.timeFormat}`));if("setting-token"===this.type)return void(this.prettierDate=t.format("M/D/YY"));if("expired"===this.type)return void(this.prettierDate=t.fromNow(!0));if("future"===this.type)return void(this.prettierDate=s.to(this.date));if("time-only"===this.type)return void(this.prettierDate=t.format(this.timeFormat));if("month-date-only"===this.type)return void(this.prettierDate=t.format(this.monthDayFormat));if("date-only"===this.type)return void(this.prettierDate=t.format(`${this.monthDayFormat}, YYYY`));if("scheduled-stream"===this.type)return this.prettierDate=t.format(`${this.monthDayFormat}, ${this.timeFormat}`),void(this.html&&(this.prettierDate=this.prettierDate.split(",").map((e=>`<span>${e}</span>`)).join("")));if("scheduled-stream-post"===this.type)return void(this.prettierDate=t.format(`${this.monthDayFormat}, ${this.timeFormat}`));if("payments"===this.type&&this.html)return void(this.prettierDate=`<span class="date">${t.format(`${this.monthDayFormat}, YYYY, ${this.timeFormat}`)}</span>`);const i=s.subtract(1,"days").startOf("day"),r=s.add(1,"days").startOf("day"),o=s.add(1,"days").endOf("day"),a=s.endOf("year"),n=t.isSame(s,"day"),u=t.isSame(i,"day"),m=t.isSame(r,"day"),d=t.isSame(s,"year");if(this.prettierDateFull=t.format(`${this.monthDayFormat}, ${this.timeFormat}`),["feed","chat","schedule","timeline","payments","reply"].includes(this.type)){if("schedule"===this.type&&s.isAfter(this.date))return void(this.prettierDate=this.$t("message.now"));if(n)return"chat"===this.type?void(this.prettierDate=t.format(this.timeFormat)):"timeline"===this.type?void(this.prettierDate=this.$t("message.today")):"reply"===this.type?void(this.prettierDate=`${this.$t("message.today")} ${t.format(this.timeFormat)}`):void(this.prettierDate=t.fromNow());if(m)return void(this.prettierDate=`${this.$t("message.tomorrow")}, ${t.format(this.timeFormat)}`);if(u)return"reply"===this.type?void(this.prettierDate=`${this.$t("message.yesterday")} ${t.format(this.timeFormat)}`):void(this.prettierDate=this.$t("message.yesterday"));if(t.isAfter(a))return"reply"===this.type?void(this.prettierDate=t.format(`${this.monthDayFormat} YYYY ${this.timeFormat}`)):void(this.prettierDate=t.format(`${this.monthDayFormat} YYYY, ${this.timeFormat}`));if(t.isAfter(o))return"reply"===this.type?void(this.prettierDate=t.format(`${this.monthDayFormat} ${this.timeFormat}`)):void(this.prettierDate=t.format(`${this.monthDayFormat}, ${this.timeFormat}`));if(d)return"reply"===this.type?void(this.prettierDate=t.format(`${this.monthDayFormat} ${this.timeFormat}`)):void(this.prettierDate=t.format(this.monthDayFormat));this.prettierDate=t.format(`${this.monthDayFormat}, YYYY`)}"vote-finished"===this.type&&(this.prettierDate=l().duration(t.diff(s)).humanize())},dayJsUpdateLocale(){l().updateLocale("en",{relativeTime:this.relativeTime})}}},f=_,b,P,v=(0,s(281656).A)(f,i,r,!1,null,null,null).exports},101900:function(e,t,s){var i=s(540346),r=s(411331);function o(e){return i(e)&&1===e.nodeType&&!r(e)}e.exports=o},205185:function(e,t,s){"use strict";s.d(t,{A:function(){return g}});var i=function e(){var t=this,s=t._self._c,i=t._self._setupProxy;return s(t.containerTag,{tag:"component"},[t.text.length?s(t.textContainerTag,{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.onVisibilityChanged,expression:"onVisibilityChanged"},{name:"safe-html",rawName:"v-safe-html",value:{text:t.text},expression:"{ text: text }"}],key:t.textContainerTag,ref:"textContainerElementRef",tag:"component",class:t.classNames,style:t.styles}):s(t.textContainerTag,{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.onVisibilityChanged,expression:"onVisibilityChanged"}],ref:"textContainerElementRef",tag:"component",class:t.classNames,style:t.styles},[t._t("default")],2),t.isOverAllowedLimit?s("span",{staticClass:"link-trunc",on:{click:t.toggleCollapse}},[t._v(" "+t._s(t.buttonLabel)+" ")]):t._e()],1)},r=[],o=s(411331),a=s.n(o),n=s(101900),l=s.n(n),u=s(944114),m=s(218111),d=s(981148),c=s(885471),p=s(444962);const h="-webkit-line-clamp",_={sms:{collapseLimit:40,visibleLimit:20},sml:{collapseLimit:80,visibleLimit:60},md:{collapseLimit:100,visibleLimit:80},lg:{collapseLimit:180,visibleLimit:80},xl:{collapseLimit:300,visibleLimit:100}};var f,b=(0,c.defineComponent)({name:"TruncatedText",props:{text:{type:String,default:""},containerTag:{type:String,default:"div"},textTag:{type:String,default:"div"},collapseLimit:{type:Number,default:0},visibleLines:{type:Number,default:0},collapseSize:{type:String,default:"xl",validator:e=>Object.keys(_).includes(e)},customCollapseSize:{type:Object,default:null,validator:e=>{const t=["collapseLimitInPixels","visibleLimitInPixels"];return a()(e)&&Object.keys(e).every((e=>t.includes(e)))}},disabled:{type:Boolean,default:!1},markdown:{type:Boolean,default:!1},btnLabel:{type:Object,default:()=>{}}},setup(e,{emit:t}){const{text:s,textTag:i,btnLabel:r,markdown:o,disabled:a,collapseLimit:n,visibleLines:u,collapseSize:m,customCollapseSize:d}=(0,c.toRefs)(e),{t:f}=(0,p.A)(),b=(0,c.ref)(null),P=(0,c.ref)(!1),v=(0,c.ref)(!0),g=(0,c.ref)(!1),C=(0,c.computed)((()=>{var e;return!(null==b||null===(e=b.value)||void 0===e||!e.textContent)})),y=(0,c.computed)((()=>{var e;return(null==d||null===(e=d.value)||void 0===e?void 0:e.collapseLimitInPixels)||_[m.value].collapseLimit})),E=(0,c.computed)((()=>{var e;return(null==d||null===(e=d.value)||void 0===e?void 0:e.visibleLimitInPixels)||_[m.value].visibleLimit})),D=(0,c.computed)((()=>{const e=["g-truncated-text","m-break-word"];return n.value&&u.value&&e.push("m-simple"),o.value&&e.push("m-markdown"),P.value&&(e.push("m-over-limit"),v.value&&e.push("m-collapsed")),e})),T="-webkit-box";let S;S=n.value&&u.value?(0,c.ref)({[h]:n.value,display:T}):(0,c.reactive)({"max-height":(0,c.computed)((()=>P.value&&v.value?`${E.value}px`:"initial")),"--mask-size":(0,c.computed)((()=>E.value<=50?"20px":"80px"))});const O=(0,c.computed)((()=>P.value&&!["div","p"].includes(i.value)?"div":i.value)),I=(0,c.computed)((()=>({collapsed:f("message.read_more"),expanded:f("message.collapse"),...r.value}))),A=(0,c.computed)((()=>v.value?I.value.collapsed:I.value.expanded)),$=()=>{(0,c.nextTick)((()=>{if(!l()(b.value)||!C.value)return;const{scrollHeight:e,offsetHeight:t}=b.value;P.value=n.value&&u.value?e>t:!e||e>y.value,n.value&&u.value&&P.value&&(S.value={[h]:u.value,display:T}),v.value=!!P.value}))},x=e=>{!a.value&&P.value&&(v.value=!v.value,u.value&&P.value&&(S.value=v.value?{[h]:u.value,display:T}:{}),t("change",v.value,e))},w=e=>{e&&!g.value&&(g.value=!0,$())},N=(0,c.computed)((()=>P.value&&v.value));return(0,c.watch)(s,$),(0,c.onMounted)($),{textContainerElementRef:b,styles:S,classNames:D,textContainerTag:O,buttonLabel:A,isCollapsedComputed:N,isCollapsed:v,isOverAllowedLimit:P,toggleCollapse:x,onVisibilityChanged:w}}}),P,v,g=(0,s(281656).A)(b,i,r,!1,null,null,null).exports},426180:function(e,t,s){"use strict";s.d(t,{A:function(){return f}});var i=function e(){var t=this,s=t._self._c;return t.user.subscribedByData||t.hasPromotion?s("span",{staticClass:"b-users__item__subscription-date",class:{"m-flex":!t.isExpired&&(t.waitForExpire||!t.isFree),"m-expired":t.isExpiredNow}},[t.user.isPendingAutoprolong?[s("span",{staticClass:"b-users__item__subscription-date__label"},[t._v(" "+t._s(t.$t("message.subscription_charge_failed_will_attempt",{AMOUNT:72}))+" ")])]:t.user.canAddSubscriber?[t.isExpired?[t.isExpiredNow?[s("span",{staticClass:"b-users__item__subscription-date__label"},[t._v(t._s(t.$t("message.expired_on_title")))]),s("span",{staticClass:"b-users__item__subscription-date__value"},[t._v(t._s(t.expiredDateHuman))])]:t.isFree?t._e():[s("span",{staticClass:"b-users__item__subscription-date__label"},[t._v(t._s(t.$t("message.expires_on_title")))]),s("span",{staticClass:"b-users__item__subscription-date__value"},[t._v(t._s(t.expiredDateHuman))])]]:t.user.isSuspended?t._e():[t.hasPromotion?[s("span",{staticClass:"b-users__item__subscription-date__label"},[t._v(" "+t._s(t.$t("message.subscribe_btn_regular_user_price",{PRICE:`${t.formatPrice(t.user.subscribePrice)}`}))+" ")])]:t.waitForExpire?[s("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:{text:t.waitForExpireSubscriptionLabel},expression:"{ text: waitForExpireSubscriptionLabel }"}],staticClass:"b-users__item__subscription-date__label"}),s("span",{staticClass:"b-users__item__subscription-date__value"},[t._v(t._s(t.expiredDateHuman))])]:[t.isFree?[t.isNewPriceHigherOldPrice?[s("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:{text:`${t.$t("message.user_card_renews_for_price_month",{PRICE:`${t.formattedPriceToSubscribe}`})}`},expression:"{ text: `${ $t('message.user_card_renews_for_price_month', {PRICE: `${formattedPriceToSubscribe}` }) }` }"}],staticClass:"b-users__item__subscription-date__label"}),s("span",{staticClass:"b-users__item__subscription-date__value"},[t._v(t._s(t.expiredDateHuman))])]:void 0]:[t.isNewPriceHigherOldPrice?[s("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:{text:`${t.$t("message.user_card_renews_for_price_month",{PRICE:`${t.formattedPriceToSubscribe}`})}`},expression:"{ text: `${ $t('message.user_card_renews_for_price_month', {PRICE: `${formattedPriceToSubscribe}` }) }` }"}],staticClass:"b-users__item__subscription-date__label"}),s("span",{staticClass:"b-users__item__subscription-date__value"},[t._v(t._s(t.expiredDateHuman))])]:[t.priceSubscribedBy>t.priceToSubscribe?[t.priceToSubscribe>0?s("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:{text:`${t.$t("message.user_card_renews_for_price_month",{PRICE:`${t.formattedPriceToSubscribe}`})}`},expression:"{ text: `${ $t('message.user_card_renews_for_price_month', {PRICE: `${formattedPriceToSubscribe}` }) }` }"}],staticClass:"b-users__item__subscription-date__label"}):s("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:{text:t.$t("message.user_card_renews_for_free")},expression:"{ text: $t('message.user_card_renews_for_free') }"}],staticClass:"b-users__item__subscription-date__label"}),s("span",{staticClass:"b-users__item__subscription-date__value"},[t._v(t._s(t.expiredDateHuman))])]:[t.priceToSubscribe>0?[s("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:{text:t.$t("message.renews_title",{PRICE:`${t.formattedPriceToSubscribe}`})},expression:"{ text: $t('message.renews_title', { PRICE: `${formattedPriceToSubscribe}` }) }"}],staticClass:"b-users__item__subscription-date__label"}),s("span",{staticClass:"b-users__item__subscription-date__value"},[t._v(t._s(t.expiredDateHuman))])]:[s("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:{text:t.$t("message.renews_month_price_free")},expression:"{ text: $t('message.renews_month_price_free') }"}],staticClass:"b-users__item__subscription-date__label"}),s("span",{staticClass:"b-users__item__subscription-date__value"},[t._v(t._s(t.expiredDateHuman))])]]]]]]]:[t.isExpiredNow?[t._v(" "+t._s(t.$t("message.user_expired_on",{DATE:t.expiredDateHuman}))+" ")]:t.isFree?t._e():[t._v(" "+t._s(t.$t("message.user_expires_on",{DATE:t.expiredDateHuman}))+" ")]]],2):t._e()},r=[],o=s(858156),a=s.n(o),n=s(974353),l=s.n(n),u=s(110908),m=s(806441),d=s(191646),c,p={name:"SubscriptionInfo",mixins:[m.A,d.tD,d.$g],computed:{...(0,u.npG)(["isAuth"]),hasPromotion(){return a()(this,"user.promotions",[]).length},priceToSubscribe(){return this.user.subscribePrice},formattedPriceToSubscribe(){return this.formatPrice(this.priceToSubscribe)},priceSubscribedBy(){return this.subscribe&&this.subscribe.price},formattedPriceSubscribedBy(){return this.formatPrice(this.priceSubscribedBy)},isFree(){return!this.subscribe||!this.subscribe.price},isNewPriceHigherOldPrice(){return!!this.subscribe&&this.priceToSubscribe>this.priceSubscribedBy},expiredDateHuman(){var e;const t=l()(null===(e=this.subscribe)||void 0===e?void 0:e.expiredAt);return t.isValid()?t.format("MMM D, YYYY"):""},waitForExpireSubscriptionLabel(){return this.subscribedByPersonalTrial?`${this.$t("message.user_card_price_for_count_days",{PRICE:this.$t("message.free_placeholder"),COUNT:this.subscribedByPersonalTrial.duration})} ${this.$t("message.user_card_label_expires")}`:this.subscribedByPromo?this.subscribedByPromo.price<=0||100===this.subscribedByPromo.discount?`${this.$t("message.user_card_price_for_count_days",{PRICE:this.$t("message.free_placeholder"),COUNT:this.subscribedByPromo.duration})} ${this.$t("message.user_card_label_expires")}`:`${this.$t("message.user_card_price_for_count_days",{PRICE:this.formatPrice(this.subscribedByPromo.price),COUNT:this.subscribedByPromo.duration})} ${this.$t("message.user_card_label_expires")}`:this.subscribedByBundle?this.$t("message.user_card_bundle_price_expires",{PRICE:`${this.formatPrice(this.subscribedByBundle.price)}`}):this.priceToSubscribe===this.priceSubscribedBy?this.$t("message.expires_title"):0===this.priceSubscribedBy?this.$t("message.renews_month_price_free"):this.$t("message.renews_month_price",{PRICE:`${this.formattedPriceSubscribedBy}`})}}},h,_,f=(0,s(281656).A)(p,i,r,!1,null,null,null).exports},433032:function(e,t,s){"use strict";s.d(t,{D:function(){return n},G:function(){return a}});var i=s(155331),r=s(826489),o=s.n(r);const a=r.isAndroid||i.CN&&"Linux"===r.osName,n=r.isIOS&&parseFloat(r.osVersion)<15.4},547822:function(e,t,s){"use strict";var i=s(185015),r=s.n(i),o=s(218111),a=s.n(o),n=s(22489),l=s.n(n),u=s(607588),m=s.n(u),d=s(962953),c=s.n(d),p=s(885471),h=s(651504),_=s.n(h),f=s(619613);const b=new h.TinyEmitter;function P(){const e=(e,t)=>{const s=undefined,i=(Array.isArray(e)?e:[e]).filter((e=>r()(e)&&Boolean(e)));(0,p.onMounted)((()=>{i.forEach((e=>{b.on(e,t)}))})),(0,p.onBeforeUnmount)((()=>{i.forEach((e=>{b.off(e,t)}))}))};return{EVENTS:f.q,setEventListener:e,$emit:(e,...t)=>b.emit(e,...t),$off:(e,t)=>b.off(e,t),$on:(e,t,s)=>b.on(e,t,s),$once:(e,t,s)=>b.once(e,t,s)}}t.A=P},606279:function(e){var t,s;t=this,s=function(){"use strict";return function(e,t,s){e=e||{};var i=t.prototype,r={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function o(e,t,s,r){return i.fromToBase(e,t,s,r)}s.en.relativeTime=r,i.fromToBase=function(t,i,o,a,n){for(var l,u,m,d=o.$locale().relativeTime||r,c=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=c.length,h=0;h<p;h+=1){var _=c[h];_.d&&(l=a?s(t).diff(o,_.d,!0):o.diff(t,_.d,!0));var f=(e.rounding||Math.round)(Math.abs(l));if(m=l>0,f<=_.r||!_.r){f<=1&&h>0&&(_=c[h-1]);var b=d[_.l];n&&(f=n(""+f)),u="string"==typeof b?b.replace("%d",f):b(f,i,_.l,m);break}}if(i)return u;var P=m?d.future:d.past;return"function"==typeof P?P(u):P.replace("%s",u)},i.to=function(e,t){return o(e,t,this,!0)},i.from=function(e,t){return o(e,t,this)};var a=function(e){return e.$u?s.utc():s()};i.toNow=function(e){return this.to(a(this),e)},i.fromNow=function(e){return this.from(a(this),e)}}},e.exports=s()},619613:function(e,t,s){"use strict";s.d(t,{q:function(){return i}});const i={TIPS_POPUP:{INIT:"TIPS_POPUP::INIT",ADDED:"TIPS_POPUP::ADDED",OPENED:"TIPS_POPUP::OPENED",CLOSED:"TIPS_POPUP::CLOSED"},ADD_NEW_CARD_POPUP:{INIT:"ADD_NEW_CARD_POPUP::INIT",ADDED:"ADD_NEW_CARD_POPUP::ADDED"},PAYMENT_SELECTION_POPUP:{INIT:"PAYMENT_SELECTION_POPUP::INIT",ADDED:"PAYMENT_SELECTION_POPUP::ADDED",CLOSED:"PAYMENT_SELECTION_POPUP::CLOSED"},PAYMENT_PAY_SERVICE_POPUP:{INIT:"PAYMENT_PAY_SERVICE_POPUP::INIT",CLOSED:"PAYMENT_PAY_SERVICE_POPUP::CLOSED"},CARD_VERIFICATION_POPUP:{INIT:"CARD_VERIFICATION_POPUP::INIT",CLOSED:"CARD_VERIFICATION_POPUP::CLOSED",VERIFIED:"CARD_VERIFICATION_POPUP::VERIFIED"},CONFIRM_SUBSCRIPTION_RENEW_POPUP:{INIT:"CONFIRM_SUBSCRIPTION_RENEW_POPUP::INIT",CLOSED:"CONFIRM_SUBSCRIPTION_RENEW_POPUP::CLOSED"},PHOTO_EDITOR:{EMOJI_CATEGORY_CHANGE:"PHOTO_EDITOR::EMOJI::CATEGORY_CHANGE",EMOJI_SEARCH_HIDE:"PHOTO_EDITOR::EMOJI::SEARCH_HIDE",GIPHY_CATEGORY_CHANGE:"PHOTO_EDITOR::GIPHY::CATEGORY_CHANGE",VAULT_LIST_CHANGE:"PHOTO_EDITOR::VAULT::LIST_CHANGE",ASSETS_SEARCH:"PHOTO_EDITOR:ASSETS_SEARCH"},CARD_ADDRESS_EDIT_POPUP:{INIT:"CARD_ADDRESS_EDIT_POPUP::INIT",CLOSED:"CARD_ADDRESS_EDIT_POPUP::CLOSED"},TOAST_NOTIFICATION:{SHOW:"TOAST_NOTIFICATION::SHOW",HIDE:"TOAST_NOTIFICATION::HIDE"},POST:{LABEL:{MODAL:{HIDE:"POST::LABEL::MODAL::HIDE"},SORT:{ON_CHANGE:"POST::LABEL::SORT::ON_CHANGE"}}},VIDEO_JS:{QUALITY_SELECTOR:{SHOWN:"VIDEOJS::QUALITY_SELECTOR::SHOWN",HIDDEN:"VIDEOJS::QUALITY_SELECTOR::HIDDEN"}},MEDIA_VAULT:{ADDED_TAG:"MEDIA_VAULT::ADDED_TAG"},PHOTOSWIPE_WRAPPER:{OPEN:"PHOTOSWIPE_WRAPPER::OPEN",CLOSE:"PHOTOSWIPE_WRAPPER::CLOSE",CLOSED:"PHOTOSWIPE_WRAPPER::CLOSED",ERROR:{IMAGE:"PHOTOSWIPE_WRAPPER::ERROR::IMAGE",VIDEO:"PHOTOSWIPE_WRAPPER::ERROR::VIDEO",AUDIO:"PHOTOSWIPE_WRAPPER::ERROR::AUDIO",MEDIA:"PHOTOSWIPE_WRAPPER::ERROR::MEDIA"},UPDATE_OPTIONS:"PHOTOSWIPE_WRAPPER::UPDATE_OPTIONS",UPDATE_DATA_SOURCE:"PHOTOSWIPE_WRAPPER::UPDATE_DATA_SOURCE"}}},621303:function(e,t,s){"use strict";s.d(t,{A:function(){return p}});const i=undefined;var r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let o;const a=new Uint8Array(16);function n(){if(!o){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");o=crypto.getRandomValues.bind(crypto)}return o(a)}const l=[];for(let h=0;h<256;++h)l.push((h+256).toString(16).slice(1));function u(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}function m(e,t=0){const s=u(e,t);if(!validate(s))throw TypeError("Stringified UUID is invalid");return s}var d=null;function c(e,t,s){if(r.randomUUID&&!t&&!e)return r.randomUUID();const i=(e=e||{}).random??e.rng?.()??n();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){if((s=s||0)<0||s+16>t.length)throw new RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[s+e]=i[e];return t}return u(i)}var p=c},716228:function(e,t,s){"use strict";var i=s(944114),r=s.n(i),o=s(218111),a=s.n(o),n=s(13579),l=s.n(n),u=s(110908);t.A={computed:{...(0,u.npG)(["authUser"]),...(0,u.GQs)(["getSubscriber"]),...(0,u.ZOz)(["getUser"]),...(0,u._84)(["notFoundUsers"])},methods:{...(0,u.tSh)(["setModalUser"]),...(0,u.pJs)(["fetchSubscriber"]),...(0,u.CXg)(["fetchUser"]),async maybeOpenCard(e){const t=await this.fetchUserData(e),{activeHelperAccess:s,isPerformer:i}=this.authUser||{},r=t&&this.notFoundUsers.some((e=>e===t.id||e===t.username));if(!t.id||t&&t.isBlocked||r){const e=t.isBlocked?"chat_user_blocked":"inactive_private_restriction_wall_message";return alert(this.$t(`message.${e}`)),!0}return this.authUser&&!s&&i&&(t.subscribedOn||t.subscribedOnExpiredNow)?this.openCard(t):this.redirectToProfilePage(t)},async fetchSubscriberData(e){let t=this.getSubscriber(e);if(!t){window.showPreloader();const s=await this.fetchSubscriber(e);t=this.getSubscriber(null==s?void 0:s.id),window.hidePreloader()}return t},async openCard(e){const{id:t}=e,s=undefined;return await this.fetchSubscriberData(t)?(this.setModalUser({userId:t}),this.$nextTick((()=>{this.$root.$emit("bv::show::modal","ModalSubscribersItem")})),!0):this.redirectToProfilePage(e)},redirectToProfilePage(e){const t=e.username||e.id;return"Profile"!==this.$route.name&&(this.$router.push({name:"Profile",params:{userId:t}}),!0)},async fetchUserData(e){if(this.notFoundUsers.includes(e))return{};let t=this.getUser(e);return t.id||(window.showPreloader(),await this.fetchUser({id:e}),t=this.getUser(e),window.hidePreloader()),t}}}},847422:function(e,t,s){"use strict";s.d(t,{A:function(){return q}});var i=function e(){var t=this,s=t._self._c;return s("div",{staticClass:"b-offer-wrapper",class:{"m-start-campaign":t.isStartCampaign,"m-started-campaign":!t.promotionEnded,"m-my-campaign":t.isStartCampaign&&t.isAuthUser}},[!t.hideTitle&&t.promotions.length?s("div",{staticClass:"b-section-title m-row g-text-uppercase g-gray-text"},[t._v(" "+t._s(t.$t("message.subscription_title"))+" ")]):t._e(),t.hasStartCampaign?s("promotion-start-campaign",{staticClass:"m-only-start-btn",attrs:{id:t.user.id}}):t._e(),t._l(t.promotions,(function(e){return s("promotion-item",{key:e.id,attrs:{id:t.id,promotion:e,"is-collapse-mode":t.isCollapseMode,"show-claims-count":t.showClaimsCount},on:{onPromotionEnded:t.onPromotionEnded,onStartCampaignChange:t.onStartCampaignChange}})}))],2)},r=[],o=s(858156),a=s.n(o),n=s(218111),l=s(22489),u=s(962953),m=s(110908),d=function e(){var t=this,s=t._self._c;return s("div",{staticClass:"b-offer-join"},[s("button",{staticClass:"g-btn m-rounded m-border m-sm m-block",attrs:{type:"button",disabled:t.isDisableStartPromo},on:{click:t.showModalPromotion}},[t._v(" "+t._s(t.$t("message.start_promotion_btn"))+" ")])])},c=[],p,h={name:"PromotionStartCampaign",computed:{...(0,m.npG)(["authUser"]),isDisableStartPromo(){return this.authUser.subscribePrice<=0||!this.authUser.isPerformer||!this.authUser.canCreatePromotion||!this.authUser.canEarn}},methods:{async showModalPromotion(){this.$root.$emit("bv::show::modal","ModalPromotion")}}},_=s(281656),f,b=(0,_.A)(h,d,c,!1,null,null,null).exports,P=function e(){var t=this,s=t._self._c;return s("div",{staticClass:"b-offer-join"},[t.isCollapseMode?s("button",{staticClass:"b-menu-list__el m-with-rectangle-hover m-tb-sm",class:{"m-opened":t.isCollapsePromo},attrs:{type:"button"},on:{click:t.toggleCollapsePromo}},[s("div",{staticClass:"b-menu-list__text g-semibold m-mb-2"},[t.promotion?[t.promotionEnded?[t._v(" "+t._s(t.removeLastCharacter(t.promotionDetailsText))+" "+t._s(t.$t("message.pretext_with"))+" "+t._s(t.promotion.claimsCount)+" promotion subscribers ")]:[t._v(" "+t._s(t.promotionDetailsText)+" ")]]:t._e()],2),s("promotion-left-time",{staticClass:"b-menu-list__subtext",attrs:{id:t.id,promotion:t.promotion,"promotion-ended":t.promotionEnded}}),s("span",{staticClass:"b-menu-list__icon"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite:icon-arrow-down",arg:"icon-arrow-down"}]})])],1):s("div",{staticClass:"b-offer-join__content"},[s("div",{staticClass:"b-offer-join__details m-break-word"},[t._v(" "+t._s(t.promotionDetailsText)+" ")]),s("promotion-left-time",{attrs:{id:t.id,promotion:t.promotion,"promotion-ended":t.promotionEnded}})],1),t.isCollapseMode&&t.isCollapsePromo||!t.isCollapseMode?[t.promotion.message?s("promotion-message",{attrs:{id:t.user.id,message:t.promotion.message}}):t._e(),t.isAuthUser&&t.showClaimsCount?s("div",{staticClass:"b-fans__item__list"},[s("div",{staticClass:"b-fans__item__list__item"},[s("span",{staticClass:"b-fans__item__list__label"},[t._v(" "+t._s(t.$t("message.started_date_title"))+" ")]),s("span",[s("utils-time",{attrs:{type:"date-only",date:t.promotion.createdAt}})],1)]),s("router-link",{staticClass:"b-fans__item__list__item m-orderable",attrs:{to:{name:"Subscribers",params:{type:"all"},query:{promoId:t.promotion.id}}}},[s("span",{staticClass:"b-fans__item__list__label"},[t._v(" "+t._s(t.$t("message.claims_count"))+" ")]),s("span",[t._v(" "+t._s(t.promotion.claimsCount)+" ")])])],1):t._e(),s("div",{staticClass:"b-offer-join__btn"},[t.promotionEnded?s("button",{staticClass:"g-btn m-rounded m-border m-block m-uppercase m-sm",attrs:{type:"button",disabled:t.disabledDeletePromotion},on:{click:t.doDeletePromotion}},[t._v(" "+t._s(t.$t("message.campaign_finished_txt_btn"))+" ")]):[t.isAuthUser?[s("button",{staticClass:"g-btn m-flat m-btn-gaps",attrs:{type:"button"},on:{click:t.doFinishPromotion}},[t._v(" "+t._s(t.$t("message.promo_campaign_finish_btn_label"))+" ")]),s("button",{staticClass:"g-btn m-flat m-btn-gaps",on:{click:function(e){return e.preventDefault(),t.copyProfileLinkMixin_doCopy.apply(null,arguments)}}},[t._v(" "+t._s(t.copyProfileLinkMixin_title)+" ")])]:[s("subscribe-btn",{attrs:{id:t.id,"sm-size":t.isSmSizeBtn}}),s("subscription-info",{attrs:{id:t.id}})]]],2)]:t._e()],2)},v=[],g=s(148824),C=s(426180),y=function e(){var t=this,s=t._self._c;return t.message?s("div",{staticClass:"b-offer-join__bubble"},[s("avatar",{staticClass:"m-border-line-theme m-absolute",attrs:{"user-id":t.id,size:36,"is-link":!1,"hide-online":""}}),s("truncated-text",{staticClass:"b-offer-join__bubble__text m-break-word",attrs:{text:t.message,"collapse-size":"md",markdown:""}})],1):t._e()},E=[],D=s(281436),T=s(205185),S,O={name:"PromotionMessage",components:{Avatar:D.default,TruncatedText:T.A},props:{id:{type:Number,required:!0},message:{type:String,required:!0}},data(){return{showReadMoreButton:!1,collapsedText:!0}},mounted(){try{this.collapsed=null!==localStorage.getItem("collapsedPromotion")&&"true"===localStorage.getItem("collapsedPromotion")&&this.isAuthUser}catch(e){}if(this.$refs.promotionMessage){const{clientHeight:e,scrollHeight:t}=this.$refs.promotionMessage;this.showReadMoreButton=e!==t}},methods:{toggleCollapse(){this.collapsedText=!this.collapsedText}}},I,A=(0,_.A)(O,y,E,!1,null,null,null).exports,$=function e(){var t=this,s=t._self._c;return s("div",{staticClass:"b-offer-join__left-time"},[t.isShowPromoDetails?[s("div",{staticClass:"b-offer-join__left-time__el"},[t.promotion.hasRelatedPromo?[t._v(" "+t._s(t.$t("message.offer_for_new_and_expired_subscribers"))+" ")]:"expired"===t.promotion.type?[t._v(" "+t._s(t.$t("message.offer_for_expired_subscribers"))+" ")]:[t._v(" "+t._s(t.$t("message.offer_for_new_subscribers"))+" ")]],2),t.promotion.finishedAt&&"0000-00-00 00:00:00"!==t.promotion.finishedAt?s("div",{staticClass:"b-offer-join__left-time__el"},[t.promotionEnded?[t._v(" "+t._s(t.$t("message.count_no_offers_ended",{AMOUNT:t.promotionEnds}))+" ")]:[t._v(" "+t._s(t.$t("message.count_no_offers_ends",{AMOUNT:t.promotionEnds}))+" ")]],2):t._e(),t.promotion.subscribeCounts?s("div",{staticClass:"b-offer-join__left-time__el"},[t._v(" "+t._s(t.$t("message.count_no_offers_left",{AMOUNT:t.promotion.subscribeCounts}))+" ")]):t._e()]:[t.promotion.finishedAt&&"0000-00-00 00:00:00"!==t.promotion.finishedAt?s("div",{staticClass:"b-offer-join__left-time__el"},[t.promotionEnded?[t._v(" "+t._s(t.$t("message.count_offers_ended",{AMOUNT:t.promotionEnds}))+" ")]:[t._v(" "+t._s(t.$t("message.count_offers_ends",{AMOUNT:t.promotionEnds}))+" ")]],2):t._e(),t.promotion.subscribeCounts?s("div",{staticClass:"b-offer-join__left-time__el"},[t._v(" "+t._s(t.$t("message.count_offers_left",{AMOUNT:t.promotion.subscribeCounts}))+" ")]):t._e()]],2)},x=[],w=s(974353),N=s.n(w),U,R={name:"PromotionLeftTime",props:{id:{type:Number,required:!0},promotion:{type:Object,required:!0},promotionEnded:{type:Boolean,required:!0}},computed:{...(0,m.ZOz)(["getUser"]),...(0,m.npG)(["authUser","authUserId"]),user(){return this.getUser(this.id)},isAuthUser(){return this.authUserId===this.user.id},isShowPromoDetails(){return"SubscribersByType"===this.$route.name||"Promotions"===this.$route.name||this.isAuthUser},promotionEnds(){return N()(this.promotion.finishedAt).format("MMM D")}}},L,M=(0,_.A)(R,$,x,!1,null,null,null).exports,F=s(88878),H=s(59960),B=s(734287),Y,k={name:"PromotionItem",components:{SubscribeBtn:g.A,SubscriptionInfo:C.A,PromotionMessage:A,PromotionLeftTime:M,UtilsTime:F.A},mixins:[H.A],props:{id:{type:Number,required:!0},promotion:{type:Object,required:!0},isCollapseMode:{type:Boolean,default:!1},showClaimsCount:{type:Boolean,default:!0}},data(){return{disabledDeletePromotion:!1,showDeletePromotionConfirm:!1,timer:null,finishNow:!1,isCollapsePromo:!0,defaultSubscribeDays:30}},computed:{...(0,m.ZOz)(["getUser"]),...(0,m.npG)(["authUserId","isAuth"]),...(0,m.WsE)(["currentDate"]),user(){return this.getUser(this.id)},promotionEnded(){const e=!this.promotion||!this.promotion.canClaim||this.finishNow;return this.$emit("onPromotionEnded",e),e},isPromotionFree(){return this.promotion.price<=0},isAuthUser(){return this.authUserId===this.user.id},promotionDiscount(){if(!this.isPromotionFree){const e=this.user.subscribePrice>this.promotion.price?Math.round((this.user.subscribePrice-this.promotion.price)/this.user.subscribePrice*100):0;return this.promotion.discount||e}return""},promotionDetailsText(){if(this.isPromotionFree){const e=this.promotion.subscribeDays||this.defaultSubscribeDays;return this.$tc("message.limited_offer_free_for_count_days_plural",e,{COUNT:e})}return this.$t("message.limited_offer_discount_for_count_days",{DISCOUNT:this.promotionDiscount,COUNT:this.promotion.subscribeDays||this.daysInCurrentMonth})},isSmSizeBtn(){return"UserList"===this.$parent.$parent.$parent.$options.name},isStartCampaign(){const e=!this.isAuthUser&&!this.promotionEnded&&this.isAuth||this.promotionEnded||!this.isAuth||!this.user.subscribedByData;return this.$emit("onStartCampaignChange",e),e},hasPromotion(){return a()(this,"user.promotions",[]).length},daysInCurrentMonth(){const e=new Date;return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},isPromotionCard(){return this.isAuthUser&&(this.user.canCreatePromotion||"SettingsSubscription"===this.$route.name)},storageKey(){return`${this.user.id}${this.promotion.id}_collapsePromo`}},watch:{promotion:{handler(e){e&&e.canClaim?this.startTimer():this.stopTimer()},immediate:!0},currentDate(){this.promotionEnded?this.stopTimer():this.startTimer()}},created(){this.getPromoCollapseState()},beforeDestroy(){this.stopTimer()},methods:{...(0,m.CXg)(["finishPromotion","deletePromotion"]),async doFinishPromotion(){if(this.isAuthUser){const e=this.$t("message.stop_promotion_campaign"),t=this.$t("message.button_label_stop_campaign"),s=this.$t("message.title_stop_profile_promotion"),i=undefined;await window.interact(e,{confirmText:t,title:s})&&(await this.finishPromotion(this.promotion.id),this.stopTimer())}},async doDeletePromotion(){this.disabledDeletePromotion=!0,await this.deletePromotion(this.promotion.id),this.disabledDeletePromotion=!1},setFinishNow(){this.finishNow=!0,this.stopTimer()},startTimer(){if(this.stopTimer(),null!==this.promotion.finishedAt){const e=+new Date(this.promotion.finishedAt)-this.currentDate;e>0?e<2147483647&&(this.timer=setTimeout(this.setFinishNow,e)):this.setFinishNow()}},stopTimer(){clearTimeout(this.timer)},toggleCollapse(){this.collapsedText=!this.collapsedText},toggleCollapsePromo(){this.isCollapsePromo=!this.isCollapsePromo,this.setPromoCollapseState()},setPromoCollapseState(){B.w.local.set(this.storageKey,this.isCollapsePromo)},getPromoCollapseState(){const e=B.w.local.get(this.storageKey);null!=e&&(this.isCollapsePromo=e)},removeLastCharacter(e){return e.substring(0,e.length-1)}}},W,V,j,G={name:"PromotionOffer",components:{PromotionStartCampaign:b,PromotionItem:(0,_.A)(k,P,v,!1,null,null,null).exports},props:{id:{type:Number,required:!0},hideTitle:{type:Boolean,default:!1},isCollapseMode:{type:Boolean,default:!1},showClaimsCount:{type:Boolean,default:!0},showStartCampaign:{type:Boolean,default:!0}},data(){return{isStartCampaign:!0,promotionEnded:null}},computed:{...(0,m.ZOz)(["getUser"]),...(0,m.npG)(["authUserId","isAuth"]),user(){return this.getUser(this.id)},isAuthUser(){return this.isAuth&&this.authUserId===this.user.id},promotionsExpired(){return a()(this,"user.promotions",[]).filter((e=>"expired"===e.type))},hasRelatedPromos(){return a()(this,"user.promotions",[]).filter((e=>e.hasRelatedPromo)).length>1},isSubscribersExpired(){return"expired"===this.$route.params.type&&["SubscribersByType","SubscribesByType"].includes(this.$route.name)},promotions(){let e;return this.$route.query.promoId&&"Subscribers"===this.$route.name?e=a()(this,"user.promotions",[]).filter((e=>e.id===+this.$route.query.promoId)):this.isSubscribersExpired?e=this.promotionsExpired:({promotions:e}=this.user),Array.isArray(e)?this.hasRelatedPromos?[e[0]].filter((e=>!!e&&e.id)):[...e].sort(((e,t)=>e.type>t.type?1:-1)).filter((e=>!!e&&e.id)):[]},hasStartCampaign(){return this.showStartCampaign&&this.isAuthUser&&(this.user.canCreatePromotion||"SettingsSubscription"===this.$route.name)}},methods:{onPromotionEnded(e){this.promotionEnded=e},onStartCampaignChange(e){this.isStartCampaign=e}}},z,q=(0,_.A)(G,i,r,!1,null,null,null).exports},921914:function(e,t,s){"use strict";s.d(t,{HI:function(){return u},O:function(){return l},i7:function(){return a},rB:function(){return m}});var i=s(826489),r=s.n(i),o=s(621303);const a=(e,t,s)=>{const{secureUploadPath:i,uploadPath:r}=s,a=encodeURIComponent(e.name.toLowerCase()),n=t?i:r,l=(Math.random()*(new Date).getTime()).toFixed(0);return`${n}${(0,o.A)()}/${l}/${a}`},n=e=>{const t=undefined;return document.createElement("video").canPlayType(e)},l=e=>{var t;const{id:s,mediaType:r,type:o,progress:a,processId:l}=e,u=!!s,m=!(null===(t=e.files)||void 0===t||!t.drm),d=100===a,c=d?l||s:void 0;return(["photo","gif"].includes(r)||"video"===r&&n(o)&&!(i.isIOS&&"video/mpeg"===o)||m||u)&&d&&!!c},u=e=>new Promise((t=>{const s=new Image;s.src=e.url,s.onload=function(){t(!0)},s.onerror=function(){t(!1)}})),m=({file:e,maxWidth:t=0,maxHeight:s=0,forceConvert:i=!1})=>new Promise(((r,o)=>{try{const o=new FileReader;o.onload=function(o){const a=new Image;a.onload=function(){const o=document.createElement("canvas");let n=1;if(a.width>t?n=t/a.width:a.height>s&&(n=s/a.height),1===n&&!i)return void r(e);o.width=a.width*n,o.height=a.height*n;const l=undefined;o.getContext("2d").drawImage(a,0,0,o.width,o.height);const u=e.name.split("."),m=u.length>1?u.slice(0,-1).join("."):u[0];o.toBlob((e=>r(new File([e],`${m}.jpg`,{type:"image/jpeg"}))),"image/jpeg")},a.src=o.target.result},o.readAsDataURL(e)}catch(a){o(!1)}}))}}]);